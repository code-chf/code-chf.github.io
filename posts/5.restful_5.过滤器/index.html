<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>RESTful:5.过滤器 | codechf的个人博客</title>

    
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />




<meta name="author" content="codechf" />
<meta name="description" content="" />



<meta name="generator" content="Hugo 0.70.0" />

<link rel="canonical" href="https://codechf.cn/posts/5.restful_5.%E8%BF%87%E6%BB%A4%E5%99%A8/" />


<meta property="og:title" content="RESTful:5.过滤器" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://codechf.cn/posts/5.restful_5.%E8%BF%87%E6%BB%A4%E5%99%A8/" />
<meta property="article:published_time" content="2020-11-12T14:32:32+08:00" />
<meta property="article:modified_time" content="2020-11-12T14:32:32+08:00" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="RESTful:5.过滤器"/>
<meta name="twitter:description" content=""/>


<link rel="stylesheet" href="/css/semantic.min.css" />
<link rel="stylesheet" href="/css/icomoon.css" />
<link rel="stylesheet" href="/css/OverlayScrollbars.min.css" />
<link rel="stylesheet" href="/css/github-markdown.css" />
<link rel="stylesheet" href="/css/site.css" />


<style>
  a {
    color: seagreen !important;
  }
</style>



<style>
  .inverted a {
     color: darkseagreen !important;
  }
</style>



<style>
  body {
    
      background-color: black;
    
    
      background-image: url(/me/background1.jpeg);
    
  }
</style>


    


  
    <link rel="stylesheet" data-highlight href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/idea.min.css" />
  



  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>



  </head>

  <body>
    
<nav class="ui secondary inverted menu dream-menu">

  <div class="item">
    <i class="large link bullseye icon dream-flip-toggle" title="翻转！"></i>
  </div>
  <div class="item">
    <i class="large link home icon" title="首页" onclick="window.location.href = 'https:\/\/codechf.cn'"></i>
  </div>
  <div class="item">
    <i class="large link icon theme-switch" onclick="themeSwitch()"></i>
  </div>
  
  <div class="item">
    <i class="large link search icon" onclick="toggleSearch()"></i>
  </div>
  
</nav>

    <div class="flip-container">
      <div class="flipper">
        <section class="front">
          <div class="dream-max-width">
            
<div class="ui centered relaxed grid dream-grid">
  <div class="sixteen wide mobile sixteen wide tablet twelve wide computer column markdown-body dream-single" id="dream-save-post-as-img">
    
    <section class="ui top attached segment cover">
      <div class="cover-img" style="background-image: url(https://gitee.com/codechf/uPic-file/raw/master/uPic/2020/11/6HfqS6-f5zdqa.png);"></div>
    </section>
    
    <section class="ui attached segment">
      <header>
        <h1 class="ui large header">
          RESTful:5.过滤器
          <div class="sub header">
            @
            
              
                <a href="https://github.com/code-chf" target="_blank">codechf</a>
              
            

            · 
                星期四，十一月 12 日，2020 年
              

            · 11 分钟阅读

            · 更新于
              
                星期四，十一月 12 日，2020 年
              
          </div>
        </h1>
      </header>

      <article style="margin-top: 2rem;"><h1 style="text-align:center;">过滤器介绍</h1>
<h2 id="基本过滤器servlet-filter">基本过滤器Servlet Filter</h2>
<p style="text-align:center;" >
<img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2020/11/qdiu23-4o3ACK.jpg" alt='img' style="" />
</p>
<h2 id="webxml">web.xml</h2>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">
&lt;filter&gt;  
       &lt;filter-name&gt;NormalFilter1&lt;/filter-name&gt;  
       &lt;filter-class&gt;restful.filter.NormalFilter1&lt;/filter-class&gt;  
  &lt;/filter&gt;  
  <span style="color:#008000">&lt;!-- 指明过滤器的覆盖范围，即哪些url访问的资源可以使用过滤器  --&gt;</span>
   &lt;filter-mapping&gt;  
       &lt;filter-name&gt;NormalFilter1&lt;/filter-name&gt;  
	   <span style="color:#008000">&lt;!-- /*表示覆盖web内的所有资源 --&gt;</span>
       &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  
   &lt;/filter-mapping&gt;  
   &lt;filter&gt;  
       &lt;filter-name&gt;NormalFilter2&lt;/filter-name&gt;  
       &lt;filter-class&gt;restful.filter.NormalFilter2&lt;/filter-class&gt;  
  &lt;/filter&gt;  
   &lt;filter-mapping&gt;  
       &lt;filter-name&gt;NormalFilter2&lt;/filter-name&gt;  
       &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  
   &lt;/filter-mapping&gt;  
    ......  
   &lt;filter&gt;  
       &lt;filter-name&gt;NormalFilterN&lt;/filter-name&gt;  
       &lt;filter-class&gt;restful.filter.NormalFilterN&lt;/filter-class&gt;  
  &lt;/filter&gt;  
   &lt;filter-mapping&gt;  
       &lt;filter-name&gt;NormalFilterN&lt;/filter-name&gt;  
       &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  
   &lt;/filter-mapping&gt;  

</code></pre></td></tr></table>
</div>
</div><h2 id="实例代码">实例代码</h2>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00f">package</span> restful.filter;  
<span style="color:#00f">import</span> java.io.IOException;  
<span style="color:#00f">import</span> javax.servlet.Filter;  
<span style="color:#00f">import</span> javax.servlet.FilterChain;  
<span style="color:#00f">import</span> javax.servlet.FilterConfig;  
<span style="color:#00f">import</span> javax.servlet.ServletException;  
<span style="color:#00f">import</span> javax.servlet.ServletRequest;  
<span style="color:#00f">import</span> javax.servlet.ServletResponse;  
<span style="color:#00f">import</span> javax.servlet.http.HttpServletRequest;  
<span style="color:#00f">import</span> javax.servlet.http.HttpServletResponse;  
<span style="color:#00f">public</span> <span style="color:#00f">class</span> <span style="color:#2b91af">NormalFilterN</span> <span style="color:#00f">implements</span> Filter {  
    <span style="color:#00f">private</span> HttpServletRequest request = <span style="color:#00f">null</span>;  
    <span style="color:#00f">private</span> HttpServletResponse response = <span style="color:#00f">null</span>;  
    @Override  
    <span style="color:#00f">public</span> <span style="color:#2b91af">void</span> destroy() {  
        System.out.println(<span style="color:#00f">this</span>.getClass().getName() + <span style="color:#a31515">&#34;正在被销毁...&#34;</span>);         
    }  
    @Override  
    <span style="color:#00f">public</span> <span style="color:#2b91af">void</span> doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain) <span style="color:#00f">throws</span> IOException, ServletException {  
        request = (HttpServletRequest)servletRequest;  
        response = (HttpServletResponse)servletResponse;  
        response.setCharacterEncoding(<span style="color:#a31515">&#34;UTF-8&#34;</span>);  
        response.getWriter().write(String.format(<span style="color:#a31515">&#34;来自%s的访问,访问的资源是%s,处理过滤器为%s&lt;hr&gt;&#34;</span>, request.getRemoteAddr(), request.getRequestURI(), <span style="color:#00f">this</span>.getClass().getName()));
		<span style="color:#008000">//chain.doFilter()的作用是，连接到下一个过滤器，将本过滤器处理好的servltRequest传递给下一个过滤器，下一个过滤器返回的数据response可作为本次过滤器的request继续下一个过滤器，过滤器由xml配置文件配置
</span><span style="color:#008000"></span>        chain.doFilter(servletRequest, servletResponse);  
        response.getWriter().write(String.format(<span style="color:#a31515">&#34;&lt;br&gt;After doFilter,%s&lt;hr&gt;&#34;</span>, <span style="color:#00f">this</span>.getClass().getName()));  
    }  
    @Override  
    <span style="color:#00f">public</span> <span style="color:#2b91af">void</span> init(FilterConfig filterConfig) <span style="color:#00f">throws</span> ServletException {  
        System.out.println(<span style="color:#00f">this</span>.getClass().getName() + <span style="color:#a31515">&#34;正在被初始化...&#34;</span>);  
    }  
}  

</code></pre></td></tr></table>
</div>
</div><h2 id="restful将基本filter拆分为两个独立的过滤器">RESTful将基本FIlter拆分为两个独立的过滤器</h2>
<ul>
<li>请求过滤器：<code>javax.ws.rs.container.ContainerRequestFilter</code></li>
<li>响应过滤器：<code>javax.ws.rs.container.ContainerResponseFilter</code></li>
</ul>
<h1 style="text-align:center;">请求过滤器</h1>
<h2 id="containerrequestfilter接口-filter方法">ContainerRequestFilter接口-filter方法</h2>
<h3 id="方法定义">方法定义</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00f">public</span> <span style="color:#2b91af">void</span> filter(ContainerRequestContext containerRequestContext) 
</code></pre></td></tr></table>
</div>
</div><h3 id="参数详解">参数详解</h3>
<p><code>ContainerRequestContext containerRequestContext</code>：请求上下文对象</p>
<h3 id="containerrequestcontext扩展阅读httpsdocsoraclecomjavaee7apijavaxwsrscontainercontainerrequestcontexthtml"><a href="https://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ContainerRequestContext.html">ContainerRequestContext扩展阅读</a></h3>
<h2 id="containerrequestfilter案例">ContainerRequestFilter案例</h2>
<ul>
<li>API</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00f">package</span> restful.api;  
<span style="color:#00f">import</span> javax.ws.rs.GET;  
<span style="color:#00f">import</span> javax.ws.rs.Path;  
<span style="color:#00f">import</span> javax.ws.rs.Produces;  
@Path(<span style="color:#a31515">&#34;/filter&#34;</span>)  
<span style="color:#00f">public</span> <span style="color:#00f">class</span> <span style="color:#2b91af">FilterAPI</span> {  
    @GET     
    @Path(<span style="color:#a31515">&#34;/hello&#34;</span>)  
    @Produces(<span style="color:#a31515">&#34;text/html;charset=UTF-8&#34;</span>)  
    <span style="color:#00f">public</span> String hello() {  
        <span style="color:#00f">return</span> <span style="color:#a31515">&#34;大家好，我在这里！&#34;</span>;  
    }  
    @GET     
    @Path(<span style="color:#a31515">&#34;/bad&#34;</span>)  
    @Produces(<span style="color:#a31515">&#34;text/html;charset=UTF-8&#34;</span>)  
    <span style="color:#00f">public</span> String bad() {  
        <span style="color:#00f">return</span> <span style="color:#a31515">&#34;大家好，你应该访问不到我！&#34;</span>;  
    }  
}  

</code></pre></td></tr></table>
</div>
</div><ul>
<li>RequestFilter</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00f">package</span> restful.filter;  
<span style="color:#00f">import</span> java.io.IOException;  
<span style="color:#00f">import</span> java.util.Iterator;  
<span style="color:#00f">import</span> java.util.List;  
<span style="color:#00f">import</span> javax.ws.rs.container.ContainerRequestContext;  
<span style="color:#00f">import</span> javax.ws.rs.container.ContainerRequestFilter;  
<span style="color:#00f">import</span> javax.ws.rs.core.MultivaluedMap;  
<span style="color:#00f">import</span> javax.ws.rs.core.Response;  
<span style="color:#00f">public</span> <span style="color:#00f">class</span> <span style="color:#2b91af">RequestFilter</span> <span style="color:#00f">implements</span> ContainerRequestFilter{  
    @Override  
    <span style="color:#00f">public</span> <span style="color:#2b91af">void</span> filter(ContainerRequestContext containerRequestContext) <span style="color:#00f">throws</span> IOException {  
        String theVisitedURL = containerRequestContext.getUriInfo().getPath();  
        System.out.printf(<span style="color:#a31515">&#34;访问路径:%s\n&#34;</span>,theVisitedURL);  
        System.out.printf(<span style="color:#a31515">&#34;访问方法:%s\n&#34;</span>,containerRequestContext.getRequest().getMethod());  
        MultivaluedMap&lt;String, String&gt; headers = containerRequestContext.getHeaders();  
        Iterator&lt;String&gt; keys =  headers.keySet().iterator();  
        <span style="color:#00f">while</span> (keys.hasNext()){  
            String key =  keys.next().toString();  
            List&lt;String&gt;  valueList = headers.get(key);  
            <span style="color:#00f">for</span>(String value :valueList){  
                System.out.printf(<span style="color:#a31515">&#34;%s\t:\t%s\n&#34;</span>,key,value);  
            }  
        }         
        <span style="color:#00f">if</span>(theVisitedURL.equals(<span style="color:#a31515">&#34;/filter/hello&#34;</span>)){  
            System.out.println(theVisitedURL+<span style="color:#a31515">&#34; : OK!&#34;</span>);             
            }<span style="color:#00f">else</span>{  
                containerRequestContext.abortWith(
                            Response.ok(theVisitedURL+<span style="color:#a31515">&#34;,没有权限！&#34;</span>).build());  
            }         
    }  
} 

</code></pre></td></tr></table>
</div>
</div><h1 style="text-align:center;">ContainerResponseFilter过滤器</h1>
<h2 id="containerresponsefilter接口-filter方法">ContainerResponseFilter接口-filter方法</h2>
<h3 id="方法定义-1">方法定义</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00f">public</span> <span style="color:#2b91af">void</span> filter(

    ContainerRequestContext containerRequestContext,

    ContainerResponseContext containerResponseContext

    )
</code></pre></td></tr></table>
</div>
</div><h3 id="参数详解-1">参数详解</h3>
<p><code>ContainerRequestContext containerRequestContext</code>：请求上下文对象</p>
<p><code>ContainerResponseContext containerResponseContext</code>：响应上下文对象</p>
<h3 id="containerrequestcontext扩展阅读httpsdocsoraclecomjavaee7apijavaxwsrscontainercontainerrequestcontexthtml-1"><a href="https://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ContainerRequestContext.html">ContainerRequestContext扩展阅读</a></h3>
<h3 id="containerresponsecontext扩展阅读httpsdocsoraclecomjavaee7apijavaxwsrscontainercontainerresponsecontexthtml"><a href="https://docs.oracle.com/javaee/7/api/javax/ws/rs/container/ContainerResponseContext.html">ContainerResponseContext扩展阅读</a></h3>
<h2 id="containerresponse案例">ContainerResponse案例</h2>
<ul>
<li>index.jsp</li>
</ul>
<pre><code class="language-jsp" data-lang="jsp">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;  
    pageEncoding=&quot;UTF-8&quot;%&gt;  
&lt;%  
    String path = request.getContextPath();  
    String basePath = request.getScheme() + &quot;://&quot; + request.getServerName() + &quot;:&quot; + request.getServerPort() + path;  
%&gt;  
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;https://www.w3.org/TR/html4/loose.dtd&quot;&gt;  
&lt;html&gt;  
&lt;head&gt;  
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;  
&lt;title&gt;表单&lt;/title&gt;  
&lt;/head&gt;  
&lt;body&gt;  
    &lt;form action=&quot;&lt;%=basePath%&gt;/filter/safeOutput&quot;  method=&quot;post&quot;&gt;  
        关键词：&lt;input  name=&quot;keyWords&quot;&gt;&lt;br&gt;  
        替换为：&lt;input name=&quot;replacement&quot;&gt;&lt;br&gt;  
        源文本：&lt;textarea name=&quot;uploadText&quot;&gt;&lt;/textarea&gt;&lt;br&gt;  
        &lt;input type=&quot;submit&quot;&gt;  
    &lt;/form&gt;  
&lt;/body&gt;  
&lt;/html&gt; 

</code></pre><ul>
<li>API</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00f">package</span> restful.api;  
<span style="color:#00f">import</span> javax.servlet.http.HttpServletRequest;  
<span style="color:#00f">import</span> javax.ws.rs.FormParam;  
<span style="color:#00f">import</span> javax.ws.rs.GET;  
<span style="color:#00f">import</span> javax.ws.rs.POST;  
<span style="color:#00f">import</span> javax.ws.rs.Path;  
<span style="color:#00f">import</span> javax.ws.rs.Produces;  
<span style="color:#00f">import</span> javax.ws.rs.core.Context;  
@Path(<span style="color:#a31515">&#34;/filter&#34;</span>)  
<span style="color:#00f">public</span> <span style="color:#00f">class</span> <span style="color:#2b91af">FilterAPI</span> {  
    @POST  
    @Path(<span style="color:#a31515">&#34;/safeOutput&#34;</span>)  
    @Produces(<span style="color:#a31515">&#34;text/html;charset=UTF-8&#34;</span>)  
    <span style="color:#00f">public</span> String safeOutput( @Context HttpServletRequest request,  
                              @FormParam(<span style="color:#a31515">&#34;keyWords&#34;</span>) String keyWords,  
                              @FormParam(<span style="color:#a31515">&#34;replacement&#34;</span>) String replacement,  
                              @FormParam(<span style="color:#a31515">&#34;uploadText&#34;</span>) String uploadText) {  
        request.getSession().setAttribute(<span style="color:#a31515">&#34;keyWords&#34;</span>, keyWords);  
        request.getSession().setAttribute(<span style="color:#a31515">&#34;replacement&#34;</span>, replacement);  
        <span style="color:#00f">return</span> uploadText;  
    }  
} 

</code></pre></td></tr></table>
</div>
</div><ul>
<li>ResponseFilter</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00f">package</span> restful.filter;  
<span style="color:#00f">import</span> java.io.IOException;  
<span style="color:#00f">import</span> java.util.Date;  
<span style="color:#00f">import</span> javax.servlet.http.HttpServletRequest;  
<span style="color:#00f">import</span> javax.ws.rs.container.ContainerRequestContext;  
<span style="color:#00f">import</span> javax.ws.rs.container.ContainerResponseContext;  
<span style="color:#00f">import</span> javax.ws.rs.container.ContainerResponseFilter;  
<span style="color:#00f">import</span> javax.ws.rs.core.Context;  
<span style="color:#00f">public</span> <span style="color:#00f">class</span> <span style="color:#2b91af">ResponseFilter</span> <span style="color:#00f">implements</span> ContainerResponseFilter{  
    @Context HttpServletRequest request;  
    @Override  
    <span style="color:#00f">public</span> <span style="color:#2b91af">void</span> filter(ContainerRequestContext containerRequestContext, ContainerResponseContext containerResponseContext) <span style="color:#00f">throws</span> IOException {  
                String keyWords = request.getSession().getAttribute(<span style="color:#a31515">&#34;keyWords&#34;</span>).toString();  
                String replacement = request.getSession().getAttribute(<span style="color:#a31515">&#34;replacement&#34;</span>).toString();  
                String responseText = containerResponseContext.getEntity().toString().replace(keyWords,replacement);   
                containerResponseContext.setEntity(  
                    responseText+<span style="color:#a31515">&#34;&lt;hr&gt;&#34;</span>+(<span style="color:#00f">new</span> Date())  
                );  
                containerResponseContext.setStatus(6001);  
    }     
}  

</code></pre></td></tr></table>
</div>
</div><h1 style="text-align:center;">案例：无间道</h1>
<p>高轨战略卫星攻击任务接收中&hellip;&hellip;</p>
<p>高轨战略卫星攻击任务解析中&hellip;&hellip;</p>
<p>低轨战术卫星攻击任务分发&hellip;&hellip;</p>
<p>低轨战术卫星E-526584任务接收完毕，开始部署&hellip;&hellip;</p>
<p>低轨战术卫星X-485271任务接收完毕，开始部署&hellip;&hellip;</p>
<p>&hellip;&hellip;</p>
<p>低轨战术卫星T-246857任务接收完毕，开始部署&hellip;&hellip;</p>
<p>低轨战术卫星攻击指令部署完毕，攻击倒计时开始&hellip;&hellip;</p>
<h2 id="第18-1-27次会议">第18-1-27次会议</h2>
<p>“张.A.RainBow,你不想对此次敌人的攻击说些什么么？！这已经是我们承受的第4次打击了，完全一样的战术进攻模式。历次攻击导致我们在震旦星区的累计损失已经达到了令人发指的程度：攻击部队损失14.62%、后勤攻击损失7.51%、平民损失3.45% 。你难道看不到每天增加的抗议人流吗？！部队的损失还在其次，平民的抗议效用正在被对手利用，当这种反战的细流汇集成江河的时候，我们就只有从震旦星区滚蛋了！！！这正是敌人的企图，历次攻击中的平民损失统计数据也是支持我的观点的。”</p>
<p>“T.鲲.宇雯将军，对敌人攻击模式的学习需要多次的数据采集，我们没有更好的方法，只能在敌人的突发性进攻中收集它们的行为数据并尝试进行分析。3.8亿人口的损失正为我们铺平道路。”</p>
<p>“张.A.RainBow！3.8亿人，不是你键盘上的ABC，不是你脑袋里的0和1，那是我们存在的基础，没有几次3.8亿的机会了！如果再没有切实可行的方案，我想未来几天也是你最后在这个世界上敲击键盘的日子了，珍惜吧！”</p>
<p>“宇雯将军，我们在第一次攻击的讨论会后持续对各次攻击前后通信数据进行了捕获分析，并在第三次攻击时我们已经成功的渗透到对方的攻击服务器中，并将这些指令进行了下载和解码，也就是会议开始时大家看到的那一系列卫星攻击指令。我们目前对对方的指令编码方式和战略战术卫星数据交互方式以及有了实质的了解。”</p>
<p>“张，我们已经承受了第4次损失，你的所谓‘了解’显然没有起到什么有效的作用，你想让我们再做一次实验小白鼠么？”</p>
<p>“宇雯将军，像这样高级别的会议我知道可以说些什么，不可以说些什么。我的自信来自于一个‘匿名者’，他为我们提供了可供入侵对方服务器并采取反制措施的方案。”</p>
<p>“你说所的‘匿名者’，在我眼里只是个十足的混蛋。如果存在这样一个人的话，我们就应该免于第4次攻击。”</p>
<p>“是的，他的确是个货真价实的‘混蛋’。第三次攻击前我们进行了‘业务洽谈’，他的漫天要价让我们无法建立起对他的信心。最后‘洽谈’的结果是将信任建立在两个阶段上，第一个阶段他告诉我们如何渗透对方的服务器，预先支付30%的费用，如果成功支付其余70%的费用并交付第二阶段可使对方攻击指令为我所用的方案。”</p>
<p>“你是想告诉我你用30%的费用购买了3.8亿人的生命么？！张，如果没有看到你所谓神秘客人提供的技术文档，相信会后你会以渎职罪去吃枪子了！”</p>
<p>“我想你的级别是够得，我会进行授权，您可以被授权进入98547号房间查阅资料，仅且仅您一个人进去。我们也会根据该技术方案排除信息渗透人员进行反制，相信，下一次对我们的攻击就是敌人对其自身的毁灭&hellip;&hellip;”</p>
<p>信息攻击队作战室</p>
<p>张.A.RainBow：“微孔分队已经完成了任务。不要浪费时间，蛋黄搅拌器分队，重任在肩，现在立刻出发！”</p>
<h2 id="案例框架"><strong>案例框架</strong></h2>
<p>点击<a href="http://nos.netease.com/edu-common-private/24399B16FDDCDE9CE656762E7883E49D-1571365373681?Signature=Oj9ix1i0fjNzPwEfv6lCVzb5a4NHlMhgCYpIZIC0BtU%3D&amp;Expires=1605165744&amp;NOSAccessKeyId=7ba71f968e4340f1ab476ecb300190fa&amp;download=restful-caseXenTen.rar"> 下载 </a>案例项目框架</p>
<h2 id="需要修改的文件">需要修改的文件</h2>
<h3 id="基本过滤器webxml">基本过滤器web.xml</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#00f">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>  
&lt;web-app version=<span style="color:#a31515">&#34;3.0&#34;</span> xmlns=<span style="color:#a31515">&#34;https://java.sun.com/xml/ns/javaee&#34;</span> xmlns:xsi=<span style="color:#a31515">&#34;https://www.w3.org/2001/XMLSchema-instance&#34;</span> xsi:schemaLocation=<span style="color:#a31515">&#34;https://java.sun.com/xml/ns/javaee https://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&#34;</span>&gt;  
    &lt;display-name&gt;restful&lt;/display-name&gt;  
    &lt;filter&gt;  
        &lt;filter-name&gt;NormalFilterA&lt;/filter-name&gt;  
        &lt;filter-class&gt;restful.filter.NormalFilterA&lt;/filter-class&gt;  
   &lt;/filter&gt;  
    &lt;filter-mapping&gt;  
        &lt;filter-name&gt;NormalFilterA&lt;/filter-name&gt;  
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  
    &lt;/filter-mapping&gt;  
    &lt;filter&gt;  
        &lt;filter-name&gt;NormalFilterC&lt;/filter-name&gt;  
        &lt;filter-class&gt;restful.filter.NormalFilterC&lt;/filter-class&gt;  
   &lt;/filter&gt;  
    &lt;filter-mapping&gt;  
        &lt;filter-name&gt;NormalFilterC&lt;/filter-name&gt;  
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  
    &lt;/filter-mapping&gt;  
    &lt;filter&gt;  
        &lt;filter-name&gt;NormalFilterB&lt;/filter-name&gt;  
        &lt;filter-class&gt;restful.filter.NormalFilterB&lt;/filter-class&gt;  
   &lt;/filter&gt;  
    &lt;filter-mapping&gt;  
        &lt;filter-name&gt;NormalFilterB&lt;/filter-name&gt;  
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  
    &lt;/filter-mapping&gt;  
    &lt;context-param&gt;  
        &lt;param-name&gt;resteasy.resources&lt;/param-name&gt;  
        &lt;param-value&gt;&lt;/param-value&gt;  
    &lt;/context-param&gt;  
    &lt;context-param&gt;  
        &lt;param-name&gt;resteasy.providers&lt;/param-name&gt;    
        &lt;param-value&gt;&lt;/param-value&gt;  
    &lt;/context-param&gt;  
    &lt;listener&gt;  
        &lt;listener-class&gt;org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap  
        &lt;/listener-class&gt;  
    &lt;/listener&gt;  
    &lt;servlet&gt;  
        &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;  
        &lt;servlet-class&gt;org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher  
        &lt;/servlet-class&gt;  
    &lt;/servlet&gt;  
    &lt;context-param&gt;  
        &lt;param-name&gt;resteasy.servlet.mapping.prefix&lt;/param-name&gt;  
        &lt;param-value&gt;/&lt;/param-value&gt;  
    &lt;/context-param&gt;  
    &lt;servlet-mapping&gt;  
        &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;  
        &lt;url-pattern&gt;/filter/*&lt;/url-pattern&gt;  
    &lt;/servlet-mapping&gt;  
    &lt;filter&gt;  
        &lt;filter-name&gt;SetCharacterEncoding&lt;/filter-name&gt;  
        &lt;filter-class&gt;zea.web.filter.SetCharacterEncodingFilter&lt;/filter-class&gt;  
    &lt;/filter&gt;  
    &lt;filter-mapping&gt;  
        &lt;filter-name&gt;SetCharacterEncoding&lt;/filter-name&gt;  
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  
    &lt;/filter-mapping&gt;  
&lt;/web-app&gt;

</code></pre></td></tr></table>
</div>
</div><h3 id="请求与相应过滤器webxml">请求与相应过滤器web.xml</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#00f">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>  
&lt;web-app version=<span style="color:#a31515">&#34;3.0&#34;</span> xmlns=<span style="color:#a31515">&#34;https://java.sun.com/xml/ns/javaee&#34;</span> xmlns:xsi=<span style="color:#a31515">&#34;https://www.w3.org/2001/XMLSchema-instance&#34;</span> xsi:schemaLocation=<span style="color:#a31515">&#34;https://java.sun.com/xml/ns/javaee https://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&#34;</span>&gt;  
    &lt;display-name&gt;restful&lt;/display-name&gt;  
    &lt;context-param&gt;  
        &lt;param-name&gt;resteasy.resources&lt;/param-name&gt;  
        &lt;param-value&gt;restful.api.FilterAPI&lt;/param-value&gt;  
    &lt;/context-param&gt;  
    &lt;context-param&gt;  
        &lt;param-name&gt;resteasy.providers&lt;/param-name&gt;    
        &lt;param-value&gt;restful.filter.RequestFilter,restful.filter.ResponseFilter&lt;/param-value&gt;  
    &lt;/context-param&gt;  
    &lt;listener&gt;  
        &lt;listener-class&gt;org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap  
        &lt;/listener-class&gt;  
    &lt;/listener&gt;  
    &lt;servlet&gt;  
        &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;  
        &lt;servlet-class&gt;org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher  
        &lt;/servlet-class&gt;  
    &lt;/servlet&gt;  
    &lt;context-param&gt;  
        &lt;param-name&gt;resteasy.servlet.mapping.prefix&lt;/param-name&gt;  
        &lt;param-value&gt;/&lt;/param-value&gt;  
    &lt;/context-param&gt;  
    &lt;servlet-mapping&gt;  
        &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;  
        &lt;url-pattern&gt;/filter/*&lt;/url-pattern&gt;  
    &lt;/servlet-mapping&gt;  
    &lt;filter&gt;  
        &lt;filter-name&gt;SetCharacterEncoding&lt;/filter-name&gt;  
        &lt;filter-class&gt;zea.web.filter.SetCharacterEncodingFilter&lt;/filter-class&gt;  
    &lt;/filter&gt;  
    &lt;filter-mapping&gt;  
        &lt;filter-name&gt;SetCharacterEncoding&lt;/filter-name&gt;  
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  
    &lt;/filter-mapping&gt;  
&lt;/web-app&gt;  

</code></pre></td></tr></table>
</div>
</div><h2 id="项目实战要求">项目实战要求</h2>
<h3 style="text-align:center;color:red;">98547号房间</h3>
<h3 style="text-align:center;font-family:'宋体'"><i><b>战略战术卫星技术资料</b></i></h3>
<h5 style="text-align:center;font-family:'宋体'"><i>第5842号研究报告</i></h5>
<h5 style="text-align:center;font-family:'宋体'"><i>密级：绝密</i></h5>
<h2 id="战略战术卫星协作概要图">战略战术卫星协作概要图</h2>
<p style="text-align:center;">
<img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2020/11/pBJ213-oiGKhu.jpg" alt='img' style="zoom:60%;" />
</p>
<h2 id="战略战术卫星数据交换格式">战略战术卫星数据交换格式</h2>
<ul>
<li>战术卫星接收指令格式</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">[{  
        &#34;zoneCode&#34;: <span style="color:#a31515">&#34;T54218&#34;</span>,  
        &#34;targetPosX&#34;: 5428.89,  
        &#34;targetPosY&#34;: 651.13,  
        &#34;targetPosZ&#34;: 785.91,  
        &#34;power&#34;: 19548236,  
        &#34;duration&#34;: 5426  
    },  
    {  
        &#34;zoneCode&#34;: <span style="color:#a31515">&#34;S542187&#34;</span>,  
        &#34;targetPosX&#34;: 3654.12,  
        &#34;targetPosY&#34;: 8421.36,  
        &#34;targetPosZ&#34;: 9857.57,  
        &#34;power&#34;: 52487532,  
        &#34;duration&#34;: 65428  
    }  
]
</code></pre></td></tr></table>
</div>
</div><p><code>targetPosX</code>：目标三维空间X坐标位置zoneCode：目标星区代码</p>
<p><code>targetPosY</code>：目标三维空间Y坐标位置</p>
<p><code>targetPosZ</code>：目标三维空间Z坐标位置</p>
<p><code>power</code>：单位时间能量输出密度</p>
<p><code>duration</code>：能量输出时长</p>
<ul>
<li>
<p>敌方向战术卫星发送指令地址
https://satelliteIP/xenTen/jsp/send.jsp</p>
</li>
<li>
<p>战术卫星接收指令地址
https://satelliteIP/xenTen/data/readCommand</p>
</li>
</ul>
<h2 id="战略卫星攻击方案">战略卫星攻击方案</h2>
<p>该方案仅由震旦星区最高行政长官授权方可阅读。</p>
<h2 id="战术卫星攻击方案">战术卫星攻击方案</h2>
<p>该方案技术思路如下：</p>
<p>（1）渗透战术卫星在轨主机（内嵌于战术卫星XenTen安全区，基于RESTful构架），具体安全漏洞参数仅由震旦星区最高行政长官授权方可阅读；具体执行由信息攻击队微孔分队负责，并引导后续渗透工作；</p>
<p>（2）战术卫星通过HTTP接收战略卫星下发的任务。信息攻击队蛋黄搅拌器分队利用API，ContainerRequestFilter与ContainerResponseFilter编写渗透代码，完成如下功能：</p>
<p>https://satelliteIP/xenTen/data/readCommand为在轨道主机上的正常API，负责接收战略卫星分配的攻击参数(格式详见战术卫星接收指令格式)。</p>
<p>该数据被存放于session的commands属性中，该属性为一个JSONArray，该JSONArray中的元素符合如下数据结构：</p>
<p style="text-align:center;">
<img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2020/11/ESKSGi-bRe8au.jpg" alt="img"  style="zoom:70%;">
</p>
<p>https://satelliteIP/xenTen/data/refresh是蛋黄搅拌器分队渗透后植入在轨道主机上的后门，供基地上传攻击指令的修改数据；refresh接口接收基地post方式给出的JSON数据，存放在session的refreshData属性中，格式如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">[{  
        &#34;zoneCode&#34;: <span style="color:#a31515">&#34;R98542&#34;</span>,  
        &#34;targetPosX&#34;: 4122.54,  
        &#34;targetPosY&#34;: 9547.76,  
        &#34;targetPosZ&#34;: 12548.69,  
        &#34;power&#34;: 521456,  
        &#34;duration&#34;: 6412  
    },  
    {  
        &#34;zoneCode&#34;: <span style="color:#a31515">&#34;R652485&#34;</span>,  
        &#34;targetPosX&#34;: 95482.36,  
        &#34;targetPosY&#34;: 7845.85,  
        &#34;targetPosZ&#34;: 9847.37,  
        &#34;power&#34;: 741785,  
        &#34;duration&#34;: 6482  
    },  
    {  
        &#34;zoneCode&#34;: <span style="color:#a31515">&#34;R742545&#34;</span>,  
        &#34;targetPosX&#34;: 16982.93,  
        &#34;targetPosY&#34;: 85623.17,  
        &#34;targetPosZ&#34;: 4872.27,  
        &#34;power&#34;: 34528,  
        &#34;duration&#34;: 342  
    }  
] 

</code></pre></td></tr></table>
</div>
</div><p>refresh调用的合法性验证方式：合法的refresh调用必须传递s、x、r三个参数，且符合s模x等于r，如果结果不符则认为是非法调用。 ContainerRequestFilter负责完成refresh调用的合法性验证，对于非法的refresh调用应将该接口行为伪装为资源不存在（需返回404错误），目的在于对敌方进行战术欺骗。</p>
<p>ContainerResponseFilter负责对正常攻击指令的修改，修正数据由植入在轨主机的refresh接口预先存放在session的refreshData属性中，该属性是一个JSONArray，该JSONArray中对象的数据结构同session的commands属性中的对象结构。</p>
<p>refresh接口只能改写commands属性中的数据，但无权向其添加数据，额外的添加行为会暴露我们的后门代码。</p>
<h2 id="战术卫星接口规格说明">战术卫星接口规格说明</h2>
<ul>
<li>敌方正常攻击数据操作接口
URL：<code>https://satelliteIP/xenTen/data/readCommand</code></li>
</ul>
<p>调用方式：POST</p>
<p>接收参数：JSON格式字符串</p>
</br>
<ul>
<li>敌方正常攻击数据操作接口调用界面
URL：<code>https://satelliteIP/xenTen/jsp/send.jsp</code></li>
</ul>
<p>类型：jsp Form</p>
<p>发送参数：JSON格式字符串</p>
<p>action指向：<code>https://satelliteIP/xenTen/data/readCommand</code></p>
<p>方法：post</p>
</br>
<ul>
<li>蛋黄搅拌器分队植入的API
URL：<code>https://satelliteIP/xenTen/data/refresh</code></li>
</ul>
<p>调用方式：POST</p>
<p>接收参数：JSON格式字符串</p>
</br>
<ul>
<li>蛋黄搅拌器分队植入的操作界面
URL：<code>https://satelliteIP/xenTen/jsp/refresh.jsp</code></li>
</ul>
<p>类型：jsp Form</p>
<p>发送参数：JSON格式字符串</p>
<p>action指向：<code>https://satelliteIP/xenTen/data/refresh</code></p>
<p>方法：post</p>
<h2 id="操作说明">操作说明</h2>
<ul>
<li>首先等待敌方向指定卫星上传攻击数据</li>
</ul>
<p style="text-align:center;">
<img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2020/11/Iz34y6-xeeaQD.jpg" alt="img" style="" />
</p>
<ul>
<li>敌方向指定卫星上传攻击数据后的反馈结果</li>
</ul>
<p style="text-align:center;">
<img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2020/11/z9HUt6-S7F6Ct.jpg" alt="img" />
</p>
<ul>
<li>利用蛋黄搅拌器植入的攻击界面向指定卫星上数据</li>
</ul>
<p style="text-align:center;">
<img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2020/11/lfxuPy-V9HpKI.jpg" alt='lfxuPy-V9HpKI' style="" />
</p>
<ul>
<li>蛋黄搅拌器植入的攻击API反馈的数据</li>
</ul>
<p style="text-align:center;">
<img src='https://gitee.com/codechf/uPic-file/raw/master/uPic/2020/11/X1kr7C-pBVY67.jpg' alt='X1kr7C-pBVY67' style=""/>
</p>
<h2 id="代码实现">代码实现</h2>
<p>具体代码等待更新····</p></article>
    </section>

    <footer class="ui attached segment dream-tags" data-html2canvas-ignore>
      
        
          <a class="ui label" href="/tags/java" title="java">java</a>
        
      
      <div
        class="ui label"
        style="float: right; cursor: pointer;"
        onclick="savePostAsImg()">
        <i class="save icon"></i>保存为图片
      </div>
    </footer>

    
      <footer class="ui attached segment" data-html2canvas-ignore>
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"></a>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
      </footer>
    

    
    
    

    
      <div class="ui segment">
        <div id="vcomments"></div>
      </div>
      <script>
        new Valine({
          el: '#vcomments',
          appId: "IxV03G57m5LqJ7yGI28hfg44-gzGzoHsz",
          appKey: "NL8D7xjtE7NRz1uGhbMw8TC9"
        })
      </script> 
    

  </div>
  <div class="sixteen wide mobile sixteen wide tablet four wide computer column">
    <article class="dream-header">
  <section class="ui top attached center aligned segment">
    <div class="ui small circular image">
      
        <img src="/me/me/1.jpg">
      
    </div>

    
    <div class="ui medium header">CHENG-HF 的博客<div class="sub header" style="margin-top: 0.5rem;">与其感慨路难行，不如马上出发。</div>
    </div>
    

    <div class="ui horizontal list">
      
      <a class="item" href="/posts">
        <i class="archive icon" title="归档"></i>
      </a>
      
      <a class="item" href="/tags">
        <i class="tags icon" title="所有标签"></i>
      </a>
      <a class="item" href="/categories">
        <i class="th list icon" title="所有分类"></i>
      </a>
    </div>
  </section>

  
  <section class="ui attached center aligned segment dream-tags">
    
      <a class="ui label" href="/tags/java" title="java">java</a>
    
      <a class="ui label" href="/tags/mac" title="mac">mac</a>
    
      <a class="ui label" href="/tags/%E5%85%B6%E4%BB%96" title="其他">其他</a>
    
      <a class="ui label" href="/tags/%E6%8A%80%E6%9C%AF%E5%B8%96" title="技术帖">技术帖</a>
    
      <a class="ui label" href="/tags/%E6%96%87%E6%A1%A3" title="文档">文档</a>
    
      <a class="ui label" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80" title="编程语言">编程语言</a>
    
  </section>
  

  
  <section class="ui attached segment dream-categories">
    <div class="ui accordion">
      
      
      
      
      

      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/bug%E5%A4%84%E7%90%86" class="item">bug处理</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/tomecat%E5%90%AF%E5%8A%A8%E9%94%99%E8%AF%AF/" class="item">Tomcat启动错误</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/linux%E5%AD%A6%E4%B9%A0" class="item">linux学习</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/%E5%AE%89%E5%8D%93%E5%AE%89%E8%A3%85linux%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="item">安卓安装Linux并搭建本地服务器</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/mac%E6%93%8D%E4%BD%9C%E7%9B%B8%E5%85%B3" class="item">mac操作相关</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/mac-os-%E7%BB%88%E7%AB%AF-iterm2-%E5%B9%B6%E9%85%8D%E7%BD%AE-zsh/" class="item">Mac OS 终端 iTerm2 并配置 zsh</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/mac%E4%BD%BF%E7%94%A8tips%E6%B1%87%E6%80%BB/" class="item">Mac使用Tips汇总</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/mac%E6%97%B6%E9%97%B4%E6%9C%BA%E5%99%A8%E8%A7%A3%E9%99%A4%E5%A4%87%E4%BB%BD/" class="item">Mac加速时间机器备份</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/mac%E5%B8%B8%E7%94%A8%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4/" class="item">Mac常用终端命令</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/python" class="item">python</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/python_1python%E5%AD%A6%E4%B9%A0_2%E7%94%A8python_docx%E7%BC%96%E5%86%9999%E4%B9%98%E6%B3%95%E8%A1%A8/" class="item">用python_docx编写99乘法表</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/python_2%E7%88%AC%E8%99%AB_3request%E6%A8%A1%E5%9D%97/" class="item">Python爬虫_3Request模块</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/python_1python%E5%AD%A6%E4%B9%A0_1%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/" class="item">BeautifulSoup编码问题</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/%E4%B8%8A%E8%AF%BE%E7%AC%94%E8%AE%B0java%E5%AE%9E%E8%AE%AD" class="item">上课笔记java实训</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BA/" class="item">类的解析：对象的动态创建</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/%E4%B8%8A%E8%AF%BE%E7%AC%94%E8%AE%B0web%E4%B8%8Erestful%E6%8A%80%E6%9C%AF" class="item">上课笔记web与restful技术</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/5.restful_5.%E8%BF%87%E6%BB%A4%E5%99%A8/" class="item">RESTful:5.过滤器</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/4.restful_4.%E6%B6%88%E6%81%AF%E5%A4%84%E7%90%86/" class="item">RESTful:4.消息处理</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/3.restful_3.%E8%A1%A8%E5%8D%95%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92/" class="item">RESTful:3.表单参数传递</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/1.restful_%E6%B3%A8%E8%A7%A3/" class="item">RESTful:1.注解</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/2.restful_%E7%AE%80%E5%8D%95%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92/" class="item">RESTful:2.简单参数传递</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/%E5%85%B6%E4%BB%96" class="item">其他</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/%E7%A5%9E%E8%88%9Fk670e-g6e3%E8%AF%A6%E7%BB%86%E6%8A%A5%E8%A1%A8/" class="item">神舟K670e G6e3详细报表</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/%E9%9B%86%E5%AE%A2ap&#43;ac%E7%BB%84%E7%BD%91%E6%89%AB%E7%9B%B2%E8%B4%B4/" class="item">集客AP&#43;AC组网扫盲贴</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/%E6%95%99%E7%A8%8B" class="item">教程</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/hugo%E5%8D%9A%E5%AE%A2%E5%90%8C%E6%AD%A5%E9%83%A8%E7%BD%B2%E5%88%B0github-pages%E5%92%8Cgitee-pages/" class="item">Hugo博客同步部署到github Pages和gitee Pages</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
      

      
        <div class="title">
          <a class="item" href="/categories" style="padding-left: 0.5rem;">......</a>
        </div>
      
    </div>
  </section>
  

  <section class="ui attached segment header-socials">
    <nav class="ui secondary menu dream-menu dream-socials">
  
    <div class="item">
      <a href="/index.xml">
        <i class=" rss square icon" title="RSS"></i>
      </a>
    </div>
  
  
    <div class="item">
      <a href="mailto:chenghf122112@outlook.com">
        <i class=" mail icon" title="Email"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://twitter.com/@chenghfhf" target="_blank">
        <i class=" twitter icon" title="Twitter"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://facebook.com//hf.cheng.982" target="_blank">
        <i class=" facebook icon" title="Facebook"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://instagram.com/huafeicheng" target="_blank">
        <i class=" instagram icon" title="Instagram"></i>
      </a>
    </div>
  

  

  

  
    <div class="item">
      <a href="https://github.com/code-chf" target="_blank">
        <i class=" github icon" title="GitHub"></i>
      </a>
    </div>
  

  

  

  
  
    <div class="item">
      <a href="https://qm.qq.com/cgi-bin/qm/qr?k=ru1O1V8-jqlEWjRtqT4jiY0kClygKgxu&noverify=01968173984" target="_blank">
        <i class=" qq icon" title="qq"></i>
      </a>
    </div>
  

</nav>

  </section>

  <section class="ui bottom attached center aligned segment">
    
      <p>© 2019 - 2021 codechf的个人博客</p>
    

    

    
      <p>记录生活，记录美好~</p>
    
  </section>
</article>

    
  </div>

</div>


          </div>
        </section>
        <section class="back">
          <div class="dream-max-width">
            <div class="ui centered relaxed grid dream-grid dream-back">
  
  
  
    <section class="sixteen wide mobile eight wide tablet four wide computer column dream-column">
      <article>
        <div class="ui top attached segment">
          <h3 class="ui header">About Me</h3>
        </div>
        <div class="ui bottom attached segment markdown-body">
          <p>My Github Project.</p>
<ol>
<li>💕 景点客流量分析，项目地址：<a href="https://github.com/code-chf/Django_project/tree/master/DataAnalysisOnAttractionVisitorFlows">景点客流量分析</a> 💗</li>
</ol>
<ul>
<li><a href="https://www.python.org/">Python3</a>, <a href="https://python-docx.readthedocs.io/en/latest/">python-docx</a></li>
<li><a href="https://www.djangoproject.com/">Django</a></li>
<li><a href="https://getbootstrap.com/">Bootstrap4</a></li>
<li><a href="https://echarts.apache.org/zh/index.html">Echarts</a></li>
<li>HTML+CSS+JQUERY</li>
<li><a href="https://www.mysql.com">Mysql</a></li>
</ul>
<p>这篇博客用 <a href="https://gohugo.io/" target="_blank">Hugo</a> 创建，使用的主题是<a href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</p>

        </div>
      </article>
    </section>
  

  <section class="sixteen wide mobile eight wide tablet four wide computer column dream-column">
    <article>
      <div class="ui top attached segment">
        <h3 class="ui header">社交链接</h3>
      </div>
      <div class="ui bottom attached segment">
        <nav class="ui secondary menu dream-menu dream-socials">
  
    <div class="item">
      <a href="/index.xml">
        <i class="large rss square icon" title="RSS"></i>
      </a>
    </div>
  
  
    <div class="item">
      <a href="mailto:chenghf122112@outlook.com">
        <i class="large mail icon" title="Email"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://twitter.com/@chenghfhf" target="_blank">
        <i class="large twitter icon" title="Twitter"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://facebook.com//hf.cheng.982" target="_blank">
        <i class="large facebook icon" title="Facebook"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://instagram.com/huafeicheng" target="_blank">
        <i class="large instagram icon" title="Instagram"></i>
      </a>
    </div>
  

  

  

  
    <div class="item">
      <a href="https://github.com/code-chf" target="_blank">
        <i class="large github icon" title="GitHub"></i>
      </a>
    </div>
  

  

  

  
  
    <div class="item">
      <a href="https://qm.qq.com/cgi-bin/qm/qr?k=ru1O1V8-jqlEWjRtqT4jiY0kClygKgxu&noverify=01968173984" target="_blank">
        <i class="large qq icon" title="qq"></i>
      </a>
    </div>
  

</nav>

      </div>
    </article>
  </section>

  <section class="sixteen wide mobile eight wide tablet four wide computer column dream-column">
    
      <footer class="ui segment">
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"></a>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
      </footer>
    
  </section>

  
  
</div>

          </div>
        </section>
      </div>
    </div>

    <script>
  window.darkNav =  true 
  window.hasTwitterEmbed =  null 

  if (window.hasTwitterEmbed) {
    
    window.twttr = (function (d, s, id) {
      var js,
        fjs = d.getElementsByTagName(s)[0],
        t = window.twttr || {}
      if (d.getElementById(id)) return t
      js = d.createElement(s)
      js.id = id
      js.src = 'https://platform.twitter.com/widgets.js'
      fjs.parentNode.insertBefore(js, fjs)

      t._e = []
      t.ready = function (f) {
        t._e.push(f)
      }

      return t
    })(document, 'script', 'twitter-wjs')
  }
</script>
<script src="/js/jquery.min.js"></script>
<script src="/js/semantic.min.js"></script>
<script src="/js/jquery.overlayScrollbars.min.js"></script>
<script src="/js/header.js"></script>
<script src="/js/main.js"></script>
<script src="/js/theme.js"></script>

    
<script src="/js/html2canvas.min.js"></script>
<script src="/js/post.js"></script>


  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/highlight.min.js"></script>

  
    
      <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/languages/ocaml.min.js"></script>
     
  

  <script>
  hljs.initHighlightingOnLoad()
  setHighlightTheme()

  function setHighlightTheme() {
    var isDark = localStore.getItem('hugo-theme-dream-is-dark')
    var lightTheme = "idea"
    var darkTheme = "atelier-seaside-dark"
    var theme = isDark ? darkTheme : lightTheme

    $('link[data-highlight]').attr('href', 'https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/' + theme + '.min.css')
    $('pre').css('background', isDark ? '#333' : '')
  }
</script>





    
      <div class="ui inverted segment" id="dream-search">
  <div class="ui search">
    <div class="ui transparent input">
      <input class="prompt" type="text" placeholder="搜索" />
    </div>
    <div class="results"></div>
  </div>
</div>
<script>
  $(document).ready(function () {
    $.getJSON('https:\/\/codechf.cn/index.json', function (data) {
      $('.ui.search').search({
        source: data,
        searchFields: ['title'],
        showNoResults: true,
      })
    })
  })
</script>
<script src="/js/search.js"></script>

    

    
  </body>
</html>
