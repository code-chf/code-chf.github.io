<!DOCTYPE html>
<html lang="zh-Hans-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>clash&#43;动态域名解析&#43;crontab实现完美科学上网 | codechf的个人博客</title>

    
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />




<meta name="author" content="codechf" />
<meta name="description" content="本教程通过clash以及它的局域网共享功能实现所有设备的科学上网（设备需设置手动代理），并利用DNSPod &#43; 个人域名 &#43; ArDNSPod脚本实现动态域名的绑定，利用crontab实现自动更新域名。
" />



<meta name="generator" content="Hugo 0.70.0" />

<link rel="canonical" href="https://codechf.cn/posts/clash&#43;%E5%8A%A8%E6%80%81%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90&#43;crontab%E5%AE%9E%E7%8E%B0%E5%AE%8C%E7%BE%8E%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" />


<meta property="og:title" content="clash&#43;动态域名解析&#43;crontab实现完美科学上网" />
<meta property="og:description" content="本教程通过clash以及它的局域网共享功能实现所有设备的科学上网（设备需设置手动代理），并利用DNSPod &#43; 个人域名 &#43; ArDNSPod脚本实现动态域名的绑定，利用crontab实现自动更新域名。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://codechf.cn/posts/clash&#43;%E5%8A%A8%E6%80%81%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90&#43;crontab%E5%AE%9E%E7%8E%B0%E5%AE%8C%E7%BE%8E%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" />
<meta property="article:published_time" content="2021-02-03T17:02:04+08:00" />
<meta property="article:modified_time" content="2021-02-03T17:02:04+08:00" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="clash&#43;动态域名解析&#43;crontab实现完美科学上网"/>
<meta name="twitter:description" content="本教程通过clash以及它的局域网共享功能实现所有设备的科学上网（设备需设置手动代理），并利用DNSPod &#43; 个人域名 &#43; ArDNSPod脚本实现动态域名的绑定，利用crontab实现自动更新域名。"/>


<link rel="stylesheet" href="/css/semantic.min.css" />
<link rel="stylesheet" href="/css/icomoon.css" />
<link rel="stylesheet" href="/css/OverlayScrollbars.min.css" />
<link rel="stylesheet" href="/css/github-markdown.css" />
<link rel="stylesheet" href="/css/site.css" />


<style>
  a {
    color: seagreen !important;
  }
</style>



<style>
  .inverted a {
     color: darkseagreen !important;
  }
</style>



<style>
  body {
    
      background-color: black;
    
    
      background-image: url(/me/background1.jpeg);
    
  }
</style>


    


  
    <link rel="stylesheet" data-highlight href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/idea.min.css" />
  



  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>



  </head>

  <body>
    
<nav class="ui secondary inverted menu dream-menu">

  <div class="item">
    <i class="large link bullseye icon dream-flip-toggle" title="翻转！"></i>
  </div>
  <div class="item">
    <i class="large link home icon" title="首页" onclick="window.location.href = 'https:\/\/codechf.cn'"></i>
  </div>
  <div class="item">
    <i class="large link icon theme-switch" onclick="themeSwitch()"></i>
  </div>
  
  <div class="item">
    <i class="large link search icon" onclick="toggleSearch()"></i>
  </div>
  
</nav>

    <div class="flip-container">
      <div class="flipper">
        <section class="front">
          <div class="dream-max-width">
            
<div class="ui centered relaxed grid dream-grid">
  <div class="sixteen wide mobile sixteen wide tablet twelve wide computer column markdown-body dream-single" id="dream-save-post-as-img">
    
    <section class="ui top attached segment cover">
      <div class="cover-img" style="background-image: url(https://gitee.com/codechf/uPic-file/raw/master/uPic/2021/02/NZoRvm-bnW62l.jpg);"></div>
    </section>
    
    <section class="ui attached segment">
      <header>
        <h1 class="ui large header">
          clash&#43;动态域名解析&#43;crontab实现完美科学上网
          <div class="sub header">
            @
            
              
                <a href="https://github.com/code-chf" target="_blank">codechf</a>
              
            

            · 
                星期三，二月 3 日，2021 年
              

            · 9 分钟阅读

            · 更新于
              
                星期三，二月 3 日，2021 年
              
          </div>
        </h1>
      </header>

      <article style="margin-top: 2rem;"><p>本教程通过clash以及它的局域网共享功能实现所有设备的科学上网（设备需设置手动代理），并利用DNSPod + 个人域名 + ArDNSPod脚本实现动态域名的绑定，利用crontab实现自动更新域名。</p>
<h1 id="用clash实现多终端科学上网">用clash实现多终端科学上网</h1>
<p>clash是比较推荐的一个科学上网工具，支持MacOS、Windows、路由器等终端，还有一个比较好的功能，那就是电脑实现了科学上网，只需要把“允许局域网连接”打开，局域网下的所有设备通过手动设置代理就可以实现科学上网，既不用买昂贵的软路由，也避免了手机等设备使用VPN的电量损耗，还能享受电脑强大的CPU算力，带来更稳定的科学上网体验。我们这里假设已经实现了科学上网。</p>
<h2 id="1实现多设备科学上网">1.实现多设备科学上网</h2>
<ul>
<li>
<p><strong>我的终端设备：</strong>
Clash for MacOs、iPhone 8、iPad 10.5、小米5</p>
</li>
<li>
<p><strong>电脑端准备</strong>
电脑端点击上方任务栏的clash图标，勾选“允许局域网连接”，一定要勾选此项，这样clash的端口才会开放出来。
然后打开电脑设置里的“网络”，记下当前电脑的局域网IP地址，我的是<code>192.168.1.17</code>，然后打开clash的控制台，点击“设置”，记下“HTTP代理端口”，默认是&quot;7890&rdquo;。</p>
<p><img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2021/02/mWkdQl-%E6%88%AA%E5%B1%8F2021-02-03%2019.21.44.png" alt="截屏2021-02-03 19.21.44" style="zoom: 50%;" /></p>
</li>
<li>
<p><strong>设备端准备</strong>
打开手机或其他设备的Wi-Fi设置选项，保证电脑和设备在一个局域网下，及一个网关下，打开Wi-Fi选择界面，点击Wi-Fi右侧的按钮进入Wi-Fi高级设置界面，找到<code>代理</code>或<code>HTTP代理</code>，选择<code>手动</code>，输入服务器地址（电脑的IP地址），以及端口（clash的HTTP代理端口，默认7890），点击存储后浏览器打开<a href="https://www.google.com">www.google.com</a> 或 <a href="https://www.youtube.com">www.youtube.com</a> 就能够正常访问了，可以看到手机无需打开vpn，也不用折腾软路由，就能够实现科学上网，前提是电脑不关机。</p>
<p><img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2021/02/7sO525-image-20210203192729295.png" alt="image-20210203192729295" style="zoom:33%;" /></p>
<p><img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2021/02/KJgSqz-image-20210203192751600.png" alt="image-20210203192751600" style="zoom:33%;" /></p>
<p><img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2021/02/UzmeE7-image-20210203193050083.png" alt="image-20210203193050083" style="zoom:33%;" /></p>
</li>
</ul>
<h2 id="2实现ddns动态域名解析">2.实现DDNS动态域名解析</h2>
<ul>
<li>
<p><strong>为什么需要动态域名解析？</strong>
手机设置代理上网，需要电脑的局域网IP地址，在不固定IP的情况下，IP地址会受网关重启、断电等因素重新分配，所以局域网IP地址也是动态的，每次IP变化后，都需要在手机端重新设置代理IP，个人觉得超级麻烦，前几天折腾IPV6 DDNS动态解析的时候，就想把局域网IP绑定域名，这样在手机设置代理的时候只需要设置绑定好的域名就可以了。</p>
</li>
<li>
<p><strong>购买域名并设置好域名解析</strong>
我的域名是在腾讯云中购买，价格周到，域名地址：<a href="codechf.cn">codechf.cn</a>
进入控制台，选择“DNS 解析 DNSPod”进入域名解析窗口，选择“添加记录”，内容如下：</p>
<table>
<thead>
<tr>
<th align="center">主机记录</th>
<th align="center">记录类型</th>
<th align="center">线路类型</th>
<th align="center">记录值</th>
<th align="center">MX优先级</th>
<th align="center">TTL</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">clash</td>
<td align="center">A</td>
<td align="center">默认</td>
<td align="center">v</td>
<td align="center">-</td>
<td align="center">600</td>
</tr>
<tr>
<td align="center">可以随便设置</td>
<td align="center">A表示ipv4<br />AAAA表示ipv6</td>
<td align="center">默认</td>
<td align="center">电脑的IPV4地址</td>
<td align="center">-</td>
<td align="center">默认</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>设置自动化脚本，定时更新ipv4地址</strong>
这里用到了ArDNSPod脚本（作者<a href="https://github.com/imki911/ArDNSPod">imki911</a> ,改自<a href="https://github.com/anrip/dnspod-shell">anrip</a>)。
开始设计脚本前，我们要先利用腾讯云的接口，在dnspod的管理界面<a href="https://console.dnspod.cn/account/token#">https://console.dnspod.cn/account/token#</a> 创建API Token，创建成功后获得ID和Token，利用这两个信息，就可以通过API修改域名解析值了，详见API文档：<a href="https://www.dnspod.cn/docs/info.html#d">https://www.dnspod.cn/docs/info.html#d</a> 。</p>
<p>首先进入<a href="https://github.com/imki911/ArDNSPod">https://github.com/imki911/ArDNSPod</a> ，下载脚本文件，将之前得到的ID和token写入dns.conf 文件, 并指定要绑定的子域名。注意arToken由ID和Token通过英文逗号组合而成。</p>
<p><strong>dns.conf</strong></p>
</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">
<span style="color:#008000"># 1. Combine your token ID and token together as follows</span>
arToken=<span style="color:#a31515">&#34;211315,0ad030f2ff924e3add1ddsfs454fs1d&#34;</span>

<span style="color:#008000"># 2. Place each domain you want to check as follows</span>
<span style="color:#008000"># you can have multiple arDdnsCheck blocks</span>
arDdnsCheck <span style="color:#a31515">&#34;codechf.cn&#34;</span> <span style="color:#a31515">&#34;clash&#34;</span>

</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>ddnspod.sh中，IPtype选择1或2，如果没有nvram，将<code>ip addr show dev eth0 | sed -e's/^.*inet6 \([^ ]*\)\/.*$/\1/;t;d' | awk 'NR==1'</code>中的 eth0 改为本机上的网口设备（通过ipconfig命令查看网络接口）</p>
<p>我将文件dns.conf中的内容复制到ddnspod.sh的最后，并注释掉. $DIR/dns.conf（也可以不用合并成两个文件，参照作者描述方法）。最终形成一个文件ddnspod.sh。</p>
</li>
<li>
<p>打开终端，输入<code>cd 脚本文件所在目录</code> ，输入<code>sh ddnspod.sh</code> 运行脚本，结果如下：</p>
<p><img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2021/02/ejOJAi-image-20210203193814273.png" alt="image-20210203193814273" style="zoom: 77%;" /></p>
</li>
</ul>
<p><strong>ddnspod.sh</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">183
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">184
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">185
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">186
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">187
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">188
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">189
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">190
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">191
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">192
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">193
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">194
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">195
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">196
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">197
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">198
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">199
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">200
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">201
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">202
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">203
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">204
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">205
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">206
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">207
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">208
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">209
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">210
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">211
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">212
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">213
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">214
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">215
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">216
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">217
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">218
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">219
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">220
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">221
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">222
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">223
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">224
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">225
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">226
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">227
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">228
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">229
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">230
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">231
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">232
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">233
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">234
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">235
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">236
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">237
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">238
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">239
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">240
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">241
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">242
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">243
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">244
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">245
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">246
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">247
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">248
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">249
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">250
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">251
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">252
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">253
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">254
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">255
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">256
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">257
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">258
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">259
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">260
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">261
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">262
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">263
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">264
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">265
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">266
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">267
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">268
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">269
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">270
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">271
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">272
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">273
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">274
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">275
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">276
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">277
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">278
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">279
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">280
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">281
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">282
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">283
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">284
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">285
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">286
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">287
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">288
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">289
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">290
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#00f">#!/bin/bash
</span><span style="color:#00f"></span>source /etc/profile
<span style="color:#008000">#################################################</span>
<span style="color:#008000"># AnripDdns v5.08</span>
<span style="color:#008000"># Dynamic DNS using DNSPod API</span>
<span style="color:#008000"># Original by anrip&lt;mail@anrip.com&gt;, http://www.anrip.com/ddnspod</span>
<span style="color:#008000"># Edited by ProfFan</span>
<span style="color:#008000">#################################################</span>

<span style="color:#008000">#################################################</span>
<span style="color:#008000"># 2018-11-06</span> 
<span style="color:#008000"># support  LAN / WAN / IPV6 resolution</span>
<span style="color:#008000"># 2019-05-24</span>
<span style="color:#008000"># Support Ipv6 truly (Yes, it was just claimed to, but actually not = =!)</span>
<span style="color:#008000"># Add another way resolving IPv6, for machines without nvram.</span>

<span style="color:#008000">#if you have any issues, please let me know.</span>
<span style="color:#008000"># https://blog.csdn.net/Imkiimki/article/details/83794355</span>
<span style="color:#008000"># Daleshen mailto:gf@gfshen.cn</span>

<span style="color:#008000">#################################################</span>

<span style="color:#008000">#Please select IP type</span>
IPtype=2  <span style="color:#008000">#1.WAN 2.LAN 3.IPv6</span>
<span style="color:#008000">#---------------------</span>
<span style="color:#00f">if</span> [ $IPtype = <span style="color:#a31515">&#39;3&#39;</span> ]; <span style="color:#00f">then</span>
    record_type=<span style="color:#a31515">&#39;AAAA&#39;</span>
<span style="color:#00f">else</span>
    record_type=<span style="color:#a31515">&#39;A&#39;</span>
<span style="color:#00f">fi</span>
echo Type: <span style="color:#a31515">${</span>record_type<span style="color:#a31515">}</span>

<span style="color:#008000"># OS Detection</span>
<span style="color:#00f">case</span> <span style="color:#00f">$(</span>uname<span style="color:#00f">)</span> in
  <span style="color:#a31515">&#39;Linux&#39;</span>)
    echo <span style="color:#a31515">&#34;OS: Linux&#34;</span>
    arIpAddress() {

	<span style="color:#00f">case</span> $IPtype in
		<span style="color:#a31515">&#39;1&#39;</span>)
				
		curltest=<span style="color:#a31515">`</span>which curl<span style="color:#a31515">`</span>
		<span style="color:#00f">if</span> [ -z <span style="color:#a31515">&#34;</span>$curltest<span style="color:#a31515">&#34;</span> ] || [ ! -s <span style="color:#a31515">&#34;`which curl`&#34;</span> ] 
		<span style="color:#00f">then</span>
			<span style="color:#008000">#根据实际情况选择使用合适的网址</span>
			<span style="color:#008000">#wget --no-check-certificate --quiet --output-document=- &#34;https://www.ipip.net&#34; | grep &#34;IP地址&#34; | grep -E -o &#39;([0-9]+\.){3}[0-9]+&#39; | head -n1 | cut -d&#39; &#39; -f1</span>
			wget --no-check-certificate --secure-protocol=TLSv1_2 --quiet --output-document=- <span style="color:#a31515">&#34;http://members.3322.org/dyndns/getip&#34;</span> | grep -E -o <span style="color:#a31515">&#39;([0-9]+\.){3}[0-9]+&#39;</span> | head -n1 | cut -d<span style="color:#a31515">&#39; &#39;</span> -f1
			<span style="color:#008000">#wget --no-check-certificate --secure-protocol=TLSv1_2 --quiet --output-document=- &#34;ip.6655.com/ip.aspx&#34; | grep -E -o &#39;([0-9]+\.){3}[0-9]+&#39; | head -n1 | cut -d&#39; &#39; -f1</span>
			<span style="color:#008000">#wget --no-check-certificate --secure-protocol=TLSv1_2 --quiet --output-document=- &#34;ip.3322.net&#34; | grep -E -o &#39;([0-9]+\.){3}[0-9]+&#39; | head -n1 | cut -d&#39; &#39; -f1</span>
		<span style="color:#00f">else</span>
		curl -k -s <span style="color:#a31515">&#34;http://members.3322.org/dyndns/getip&#34;</span> | grep -E -o <span style="color:#a31515">&#39;([0-9]+\.){3}[0-9]+&#39;</span> | head -n1 | cut -d<span style="color:#a31515">&#39; &#39;</span> -f1
		<span style="color:#008000">#curl -L -k -s &#34;https://www.ipip.net&#34; | grep &#34;IP地址&#34; | grep -E -o &#39;([0-9]+\.){3}[0-9]+&#39; | head -n1 | cut -d&#39; &#39; -f1</span>

		<span style="color:#008000">#curl -k -s ip.6655.com/ip.aspx | grep -E -o &#39;([0-9]+\.){3}[0-9]+&#39; | head -n1 | cut -d&#39; &#39; -f1</span>
		<span style="color:#008000">#curl -k -s ip.3322.net | grep -E -o &#39;([0-9]+\.){3}[0-9]+&#39; | head -n1 | cut -d&#39; &#39; -f1</span>		
		<span style="color:#00f">fi</span>
		;;
 
		<span style="color:#a31515">&#39;2&#39;</span>)
		
		ip -o -4 addr list | grep -Ev <span style="color:#a31515">&#39;\s(docker|lo)&#39;</span> | awk <span style="color:#a31515">&#39;{print $4}&#39;</span> | cut -d/ -f1 
		;;
 
		<span style="color:#a31515">&#39;3&#39;</span>)
		
		<span style="color:#008000"># 因为一般ipv6没有nat ipv6的获得可以本机获得</span>
		<span style="color:#008000">#ifconfig $(nvram get wan0_ifname_t) | awk &#39;/Global/{print $3}&#39; | awk -F/ &#39;{print $1}&#39;</span> 
		ip addr show dev en0 | sed -e<span style="color:#a31515">&#39;s/^.*inet6 \([^ ]*\)\/.*$/\1/;t;d&#39;</span> | awk <span style="color:#a31515">&#39;NR==1&#39;</span> <span style="color:#008000">#如果没有nvram，使用这条，注意将eth0改为本机上的网口设备 （通过 ifconfig 查看网络接口）</span>
		;;
 	<span style="color:#00f">esac</span>
 
    }
    ;;
  <span style="color:#a31515">&#39;FreeBSD&#39;</span>)
    echo <span style="color:#a31515">&#39;FreeBSD&#39;</span>
    exit 100
    ;;
  <span style="color:#a31515">&#39;WindowsNT&#39;</span>)
    echo <span style="color:#a31515">&#34;Windows&#34;</span>
    exit 100
    ;;
  <span style="color:#a31515">&#39;Darwin&#39;</span>)
    echo <span style="color:#a31515">&#34;Mac&#34;</span>
    arIpAddress() {
        ifconfig | grep <span style="color:#a31515">&#34;inet &#34;</span> | grep -v 127.0.0.1 | awk <span style="color:#a31515">&#39;{print $2}&#39;</span>
    }
    ;;
  <span style="color:#a31515">&#39;SunOS&#39;</span>)
    echo <span style="color:#a31515">&#39;Solaris&#39;</span>
    exit 100
    ;;
  <span style="color:#a31515">&#39;AIX&#39;</span>)
    echo <span style="color:#a31515">&#39;AIX&#39;</span>
    exit 100
    ;;
  *) ;;
<span style="color:#00f">esac</span>

echo <span style="color:#a31515">&#34;Address: </span><span style="color:#00f">$(</span>arIpAddress<span style="color:#00f">)</span><span style="color:#a31515">&#34;</span>

<span style="color:#008000"># Get script dir</span>
<span style="color:#008000"># See: http://stackoverflow.com/a/29835459/4449544</span>
rreadlink() ( <span style="color:#008000"># Execute the function in a *subshell* to localize variables and the effect of `cd`.</span>

  target=$1 fname= targetDir= CDPATH=

  <span style="color:#008000"># Try to make the execution environment as predictable as possible:</span>
  <span style="color:#008000"># All commands below are invoked via `command`, so we must make sure that `command`</span>
  <span style="color:#008000"># itself is not redefined as an alias or shell function.</span>
  <span style="color:#008000"># (Note that command is too inconsistent across shells, so we don&#39;t use it.)</span>
  <span style="color:#008000"># `command` is a *builtin* in bash, dash, ksh, zsh, and some platforms do not even have</span>
  <span style="color:#008000"># an external utility version of it (e.g, Ubuntu).</span>
  <span style="color:#008000"># `command` bypasses aliases and shell functions and also finds builtins</span> 
  <span style="color:#008000"># in bash, dash, and ksh. In zsh, option POSIX_BUILTINS must be turned on for that</span>
  <span style="color:#008000"># to happen.</span>
  { <span style="color:#a31515">\u</span>nalias command; <span style="color:#a31515">\u</span>nset -f command; } &gt;/dev/null 2&gt;&amp;1
  [ -n <span style="color:#a31515">&#34;</span>$ZSH_VERSION<span style="color:#a31515">&#34;</span> ] &amp;&amp; options[POSIX_BUILTINS]=on <span style="color:#008000"># make zsh find *builtins* with `command` too.</span>

  <span style="color:#00f">while</span> :; <span style="color:#00f">do</span> <span style="color:#008000"># Resolve potential symlinks until the ultimate target is found.</span>
      [ -L <span style="color:#a31515">&#34;</span>$target<span style="color:#a31515">&#34;</span> ] || [ -e <span style="color:#a31515">&#34;</span>$target<span style="color:#a31515">&#34;</span> ] || { command printf <span style="color:#a31515">&#39;%s\n&#39;</span> <span style="color:#a31515">&#34;ERROR: &#39;</span>$target<span style="color:#a31515">&#39; does not exist.&#34;</span> &gt;&amp;2; <span style="color:#00f">return</span> 1; }
      command cd <span style="color:#a31515">&#34;</span><span style="color:#00f">$(</span>command dirname -- <span style="color:#a31515">&#34;</span>$target<span style="color:#a31515">&#34;</span><span style="color:#00f">)</span><span style="color:#a31515">&#34;</span> <span style="color:#008000"># Change to target dir; necessary for correct resolution of target path.</span>
      fname=<span style="color:#00f">$(</span>command basename -- <span style="color:#a31515">&#34;</span>$target<span style="color:#a31515">&#34;</span><span style="color:#00f">)</span> <span style="color:#008000"># Extract filename.</span>
      [ <span style="color:#a31515">&#34;</span>$fname<span style="color:#a31515">&#34;</span> = <span style="color:#a31515">&#39;/&#39;</span> ] &amp;&amp; fname=<span style="color:#a31515">&#39;&#39;</span> <span style="color:#008000"># !! curiously, `basename /` returns &#39;/&#39;</span>
      <span style="color:#00f">if</span> [ -L <span style="color:#a31515">&#34;</span>$fname<span style="color:#a31515">&#34;</span> ]; <span style="color:#00f">then</span>
        <span style="color:#008000"># Extract [next] target path, which may be defined</span>
        <span style="color:#008000"># *relative* to the symlink&#39;s own directory.</span>
        <span style="color:#008000"># Note: We parse `ls -l` output to find the symlink target</span>
        <span style="color:#008000">#       which is the only POSIX-compliant, albeit somewhat fragile, way.</span>
        target=<span style="color:#00f">$(</span>command ls -l <span style="color:#a31515">&#34;</span>$fname<span style="color:#a31515">&#34;</span><span style="color:#00f">)</span>
        target=<span style="color:#a31515">${</span>target#* -&gt; <span style="color:#a31515">}</span>
        <span style="color:#00f">continue</span> <span style="color:#008000"># Resolve [next] symlink target.</span>
      <span style="color:#00f">fi</span>
      break <span style="color:#008000"># Ultimate target reached.</span>
  <span style="color:#00f">done</span>
  targetDir=<span style="color:#00f">$(</span>command pwd -P<span style="color:#00f">)</span> <span style="color:#008000"># Get canonical dir. path</span>
  <span style="color:#008000"># Output the ultimate target&#39;s canonical path.</span>
  <span style="color:#008000"># Note that we manually resolve paths ending in /. and /.. to make sure we have a normalized path.</span>
  <span style="color:#00f">if</span> [ <span style="color:#a31515">&#34;</span>$fname<span style="color:#a31515">&#34;</span> = <span style="color:#a31515">&#39;.&#39;</span> ]; <span style="color:#00f">then</span>
    command printf <span style="color:#a31515">&#39;%s\n&#39;</span> <span style="color:#a31515">&#34;</span><span style="color:#a31515">${</span>targetDir%/<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span>
  <span style="color:#00f">elif</span>  [ <span style="color:#a31515">&#34;</span>$fname<span style="color:#a31515">&#34;</span> = <span style="color:#a31515">&#39;..&#39;</span> ]; <span style="color:#00f">then</span>
    <span style="color:#008000"># Caveat: something like /var/.. will resolve to /private (assuming /var@ -&gt; /private/var), i.e. the &#39;..&#39; is applied</span>
    <span style="color:#008000"># AFTER canonicalization.</span>
    command printf <span style="color:#a31515">&#39;%s\n&#39;</span> <span style="color:#a31515">&#34;</span><span style="color:#00f">$(</span>command dirname -- <span style="color:#a31515">&#34;</span><span style="color:#a31515">${</span>targetDir<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span><span style="color:#00f">)</span><span style="color:#a31515">&#34;</span>
  <span style="color:#00f">else</span>
    command printf <span style="color:#a31515">&#39;%s\n&#39;</span> <span style="color:#a31515">&#34;</span><span style="color:#a31515">${</span>targetDir%/<span style="color:#a31515">}</span><span style="color:#a31515">/</span>$fname<span style="color:#a31515">&#34;</span>
  <span style="color:#00f">fi</span>
)

DIR=<span style="color:#00f">$(</span>dirname -- <span style="color:#a31515">&#34;</span><span style="color:#00f">$(</span>readlink <span style="color:#a31515">&#34;</span>$0<span style="color:#a31515">&#34;</span><span style="color:#00f">)</span><span style="color:#a31515">&#34;</span><span style="color:#00f">)</span>

<span style="color:#008000"># Global Variables:</span>

<span style="color:#008000"># Token-based Authentication</span>
arToken=<span style="color:#a31515">&#34;&#34;</span>
<span style="color:#008000"># Account-based Authentication</span>
arMail=<span style="color:#a31515">&#34;&#34;</span>
arPass=<span style="color:#a31515">&#34;&#34;</span>

<span style="color:#008000"># Load config</span>

<span style="color:#008000">#. $DIR/dns.conf</span>

<span style="color:#008000"># Get Domain IP</span>
<span style="color:#008000"># arg: domain</span>
arDdnsInfo() {
    local domainID recordID recordIP
    <span style="color:#008000"># Get domain ID</span>
    domainID=<span style="color:#00f">$(</span>arApiPost <span style="color:#a31515">&#34;Domain.Info&#34;</span> <span style="color:#a31515">&#34;domain=</span><span style="color:#a31515">${</span>1<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span><span style="color:#00f">)</span>
    
    domainID=<span style="color:#00f">$(</span>echo $domainID | sed <span style="color:#a31515">&#39;s/.*{&#34;id&#34;:&#34;\([0-9]*\)&#34;.*/\1/&#39;</span><span style="color:#00f">)</span>
    
    <span style="color:#008000"># Get Record ID</span>
    recordID=<span style="color:#00f">$(</span>arApiPost <span style="color:#a31515">&#34;Record.List&#34;</span> <span style="color:#a31515">&#34;domain_id=</span><span style="color:#a31515">${</span>domainID<span style="color:#a31515">}</span><span style="color:#a31515">&amp;sub_domain=</span><span style="color:#a31515">${</span>2<span style="color:#a31515">}</span><span style="color:#a31515">&amp;record_type=</span><span style="color:#a31515">${</span>record_type<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span><span style="color:#00f">)</span>
    
    recordID=<span style="color:#00f">$(</span>echo $recordID | sed <span style="color:#a31515">&#39;s/.*\[{&#34;id&#34;:&#34;\([0-9]*\)&#34;.*/\1/&#39;</span><span style="color:#00f">)</span>
    
    <span style="color:#008000"># Last IP</span>
    recordIP=<span style="color:#00f">$(</span>arApiPost <span style="color:#a31515">&#34;Record.Info&#34;</span> <span style="color:#a31515">&#34;domain_id=</span><span style="color:#a31515">${</span>domainID<span style="color:#a31515">}</span><span style="color:#a31515">&amp;record_id=</span><span style="color:#a31515">${</span>recordID<span style="color:#a31515">}</span><span style="color:#a31515">&amp;record_type=</span><span style="color:#a31515">${</span>record_type<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span><span style="color:#00f">)</span>
    
    recordIP=<span style="color:#00f">$(</span>echo $recordIP | sed <span style="color:#a31515">&#39;s/.*,&#34;value&#34;:&#34;\([0-9a-z\.:]*\)&#34;.*/\1/&#39;</span><span style="color:#00f">)</span>
    
    <span style="color:#008000"># Output IP</span>
    <span style="color:#00f">case</span> <span style="color:#a31515">&#34;</span>$recordIP<span style="color:#a31515">&#34;</span> in 
      [1-9a-z]*)
        echo $recordIP
        <span style="color:#00f">return</span> 0
        ;;
      *)
        echo <span style="color:#a31515">&#34;Get Record Info Failed!&#34;</span>
        <span style="color:#00f">return</span> 1
        ;;
    <span style="color:#00f">esac</span>
}

<span style="color:#008000"># Get data</span>
<span style="color:#008000"># arg: type data</span>
<span style="color:#008000"># see Api doc: https://www.dnspod.cn/docs/records.html#</span>
arApiPost() {
    local agent=<span style="color:#a31515">&#34;AnripDdns/5.07(mail@anrip.com)&#34;</span>
    <span style="color:#008000">#local inter=&#34;https://dnsapi.cn/${1:?&#39;Info.Version&#39;}&#34;</span>
    local inter=<span style="color:#a31515">&#34;https://dnsapi.cn/</span><span style="color:#a31515">${</span>1<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span>
    <span style="color:#00f">if</span> [ <span style="color:#a31515">&#34;x</span><span style="color:#a31515">${</span>arToken<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span> = <span style="color:#a31515">&#34;x&#34;</span> ]; <span style="color:#00f">then</span> <span style="color:#008000"># undefine token</span>
        local param=<span style="color:#a31515">&#34;login_email=</span><span style="color:#a31515">${</span>arMail<span style="color:#a31515">}</span><span style="color:#a31515">&amp;login_password=</span><span style="color:#a31515">${</span>arPass<span style="color:#a31515">}</span><span style="color:#a31515">&amp;format=json&amp;</span><span style="color:#a31515">${</span>2<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span>
    <span style="color:#00f">else</span>
        local param=<span style="color:#a31515">&#34;login_token=</span><span style="color:#a31515">${</span>arToken<span style="color:#a31515">}</span><span style="color:#a31515">&amp;format=json&amp;</span><span style="color:#a31515">${</span>2<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span>
    <span style="color:#00f">fi</span>
    wget --quiet --no-check-certificate --secure-protocol=TLSv1_2 --output-document=- --user-agent=$agent --post-data $param $inter
}

<span style="color:#008000"># Update</span>
<span style="color:#008000"># arg: main domain  sub domain</span>
arDdnsUpdate() {
    local domainID recordID recordRS recordCD recordIP myIP
    
  
    <span style="color:#008000"># Get domain ID</span>
    domainID=<span style="color:#00f">$(</span>arApiPost <span style="color:#a31515">&#34;Domain.Info&#34;</span> <span style="color:#a31515">&#34;domain=</span><span style="color:#a31515">${</span>1<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span><span style="color:#00f">)</span>
    domainID=<span style="color:#00f">$(</span>echo $domainID | sed <span style="color:#a31515">&#39;s/.*{&#34;id&#34;:&#34;\([0-9]*\)&#34;.*/\1/&#39;</span><span style="color:#00f">)</span>
    <span style="color:#008000">#echo $domainID</span>
    <span style="color:#008000"># Get Record ID</span>
    recordID=<span style="color:#00f">$(</span>arApiPost <span style="color:#a31515">&#34;Record.List&#34;</span> <span style="color:#a31515">&#34;domain_id=</span><span style="color:#a31515">${</span>domainID<span style="color:#a31515">}</span><span style="color:#a31515">&amp;record_type=</span><span style="color:#a31515">${</span>record_type<span style="color:#a31515">}</span><span style="color:#a31515">&amp;sub_domain=</span><span style="color:#a31515">${</span>2<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span><span style="color:#00f">)</span>
    recordID=<span style="color:#00f">$(</span>echo $recordID | sed <span style="color:#a31515">&#39;s/.*\[{&#34;id&#34;:&#34;\([0-9]*\)&#34;.*/\1/&#39;</span><span style="color:#00f">)</span>
    <span style="color:#008000">#echo $recordID</span>
    <span style="color:#008000"># Update IP</span>
    myIP=<span style="color:#00f">$(</span>arIpAddress<span style="color:#00f">)</span>
    recordRS=<span style="color:#00f">$(</span>arApiPost <span style="color:#a31515">&#34;Record.Modify&#34;</span> <span style="color:#a31515">&#34;domain_id=</span><span style="color:#a31515">${</span>domainID<span style="color:#a31515">}</span><span style="color:#a31515">&amp;sub_domain=</span><span style="color:#a31515">${</span>2<span style="color:#a31515">}</span><span style="color:#a31515">&amp;record_type=</span><span style="color:#a31515">${</span>record_type<span style="color:#a31515">}</span><span style="color:#a31515">&amp;record_id=</span><span style="color:#a31515">${</span>recordID<span style="color:#a31515">}</span><span style="color:#a31515">&amp;record_line=默认&amp;value=</span><span style="color:#a31515">${</span>myIP<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span><span style="color:#00f">)</span>
    recordCD=<span style="color:#00f">$(</span>echo $recordRS | sed <span style="color:#a31515">&#39;s/.*{&#34;code&#34;:&#34;\([0-9]*\)&#34;.*/\1/&#39;</span><span style="color:#00f">)</span>
    recordIP=<span style="color:#00f">$(</span>echo $recordRS | sed <span style="color:#a31515">&#39;s/.*,&#34;value&#34;:&#34;\([0-9a-z\.:]*\)&#34;.*/\1/&#39;</span><span style="color:#00f">)</span>
    
    <span style="color:#008000"># Output IP</span>
    <span style="color:#00f">if</span> [ <span style="color:#a31515">&#34;</span>$recordIP<span style="color:#a31515">&#34;</span> = <span style="color:#a31515">&#34;</span>$myIP<span style="color:#a31515">&#34;</span> ]; <span style="color:#00f">then</span>
        <span style="color:#00f">if</span> [ <span style="color:#a31515">&#34;</span>$recordCD<span style="color:#a31515">&#34;</span> = <span style="color:#a31515">&#34;1&#34;</span> ]; <span style="color:#00f">then</span>
            echo $recordIP
            <span style="color:#00f">return</span> 0
        <span style="color:#00f">fi</span>
        <span style="color:#008000"># Echo error message</span>
        echo $recordRS | sed <span style="color:#a31515">&#39;s/.*,&#34;message&#34;:&#34;\([^&#34;]*\)&#34;.*/\1/&#39;</span>
        <span style="color:#00f">return</span> 1
    <span style="color:#00f">else</span>
        echo $recordIP <span style="color:#008000">#&#34;Update Failed! Please check your network.&#34;</span>
        <span style="color:#00f">return</span> 1
    <span style="color:#00f">fi</span>
}

<span style="color:#008000"># DDNS Check</span>
<span style="color:#008000"># Arg: Main Sub</span>
arDdnsCheck() {
    local postRS
    local lastIP
    local hostIP=<span style="color:#00f">$(</span>arIpAddress<span style="color:#00f">)</span>
    echo <span style="color:#a31515">&#34;Updating Domain: </span><span style="color:#a31515">${</span>2<span style="color:#a31515">}</span><span style="color:#a31515">.</span><span style="color:#a31515">${</span>1<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span>
    echo <span style="color:#a31515">&#34;hostIP: </span><span style="color:#a31515">${</span>hostIP<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span>
    lastIP=<span style="color:#00f">$(</span>arDdnsInfo $1 $2<span style="color:#00f">)</span>
    <span style="color:#00f">if</span> [ $? -eq 0 ]; <span style="color:#00f">then</span>
        echo <span style="color:#a31515">&#34;lastIP: </span><span style="color:#a31515">${</span>lastIP<span style="color:#a31515">}</span><span style="color:#a31515">&#34;</span>
        <span style="color:#00f">if</span> [ <span style="color:#a31515">&#34;</span>$lastIP<span style="color:#a31515">&#34;</span> != <span style="color:#a31515">&#34;</span>$hostIP<span style="color:#a31515">&#34;</span> ]; <span style="color:#00f">then</span>
            postRS=<span style="color:#00f">$(</span>arDdnsUpdate $1 $2<span style="color:#00f">)</span>
             
            <span style="color:#00f">if</span> [ $? -eq 0 ]; <span style="color:#00f">then</span>
                echo <span style="color:#a31515">&#34;update to </span><span style="color:#a31515">${</span>postRS<span style="color:#a31515">}</span><span style="color:#a31515"> successed.&#34;</span>
                <span style="color:#00f">return</span> 0
            <span style="color:#00f">else</span>
                echo <span style="color:#a31515">${</span>postRS<span style="color:#a31515">}</span>
                <span style="color:#00f">return</span> 1
            <span style="color:#00f">fi</span>
        <span style="color:#00f">fi</span>
        echo <span style="color:#a31515">&#34;Last IP is the same as current, no action.&#34;</span>
        <span style="color:#00f">return</span> 1
    <span style="color:#00f">fi</span>
    echo <span style="color:#a31515">${</span>lastIP<span style="color:#a31515">}</span>
    <span style="color:#00f">return</span> 1
}

<span style="color:#008000"># DDNS</span>
<span style="color:#008000">#echo ${#domains[@]}</span>
<span style="color:#008000">#for index in ${!domains[@]}; do</span>
<span style="color:#008000">#    echo &#34;${domains[index]} ${subdomains[index]}&#34;</span>
<span style="color:#008000">#    arDdnsCheck &#34;${domains[index]}&#34; &#34;${subdomains[index]}&#34;</span>
<span style="color:#008000">#done</span>

<span style="color:#008000">#载入dns.conf</span>
<span style="color:#008000">#. $DIR/dns.conf</span>
<span style="color:#008000"># 1. Combine your token ID and token together as follows</span>
arToken=<span style="color:#a31515">&#34;211315,0ad030f2ff924e3add1dd44c57d5231b&#34;</span>

<span style="color:#008000"># 2. Place each domain you want to check as follows</span>
<span style="color:#008000"># you can have multiple arDdnsCheck blocks</span>
arDdnsCheck <span style="color:#a31515">&#34;codechf.cn&#34;</span> <span style="color:#a31515">&#34;clash&#34;</span>


</code></pre></td></tr></table>
</div>
</div><h1 id="crontab设置定时任务">crontab设置定时任务</h1>
<p>脚本命令准备好之后，接下来就是为系统设置定时任务，这里我们用crontab实现。</p>
<p>终端输入<code>crontab -l</code>查看当前用户下是否有定时任务，如果提示“zsh: command not found: crontab” 则需要去下载crontab相关的包，这里可以百度下。</p>
<p>输入如果没有定时任务，则输入<code>crontab -e</code>新建一条任务，之后会提示选择用何种方式打开，这里建议第二种，选择vim打开。打开之后就是我们的任务脚本编辑区域，cron表达式可以百度，这里不再多讲，菜鸟教程也很不错<a href="https://www.runoob.com/linux/linux-comm-crontab.html">Linux crontab命令—菜鸟教程 </a> ，这里附上我的脚本：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#00f">#!/bin/bash
</span><span style="color:#00f"></span><span style="color:#008000"># m h  dom mon dow   command</span>

<span style="color:#008000"># *    *    *    *    *</span>
<span style="color:#008000"># -    -    -    -    -</span>
<span style="color:#008000"># |    |    |    |    |</span>
<span style="color:#008000"># |    |    |    |    +----- 星期中星期几 (0 - 7) (星期天 为0)</span>
<span style="color:#008000"># |    |    |    +---------- 月份 (1 - 12)</span> 
<span style="color:#008000"># |    |    +--------------- 一个月中的第几天 (1 - 31)</span>
<span style="color:#008000"># |    +-------------------- 小时 (0 - 23)</span>
<span style="color:#008000"># +------------------------- 分钟 (0 - 59)</span>

*/30 * * * * /bin/bash ~/DDNS/ddnspod.sh &gt;&gt; ~/log/crontab.log
</code></pre></td></tr></table>
</div>
</div><p>最后一条命令的意思是，每隔30分钟，用/bin/bash执行~/DDNS/ddnspod.sh脚本文件，并把输出信息写入crontab.log中。</p>
<p>查看日志：</p>
<p><img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2021/02/XvJJ6n-image-20210203200117149.png" alt="image-20210203200117149" style="zoom:80%;" /></p>
<p>最后，在手机上代理改成我们绑定的域名，比如我的是clash.codechf.cn，这是一个子域名，当我们手机设置后，它就会先找到域名对应的IP，然后通过这个IP用电脑转发数据，访问局域网内的资源，通过这个clash端口实现科学上网。</p>
<p><img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2021/02/nEwMcI-image-20210203201636625.png" alt="image-20210203201636625" style="zoom:33%;" /></p>
<h1 id="遇到的坑">遇到的坑</h1>
<ol>
<li>
<p>这个坑花了很多时间去填，脚本在shell可以运行，但是在crontab任务中却运行出错，一开始以为是权限问题，改成777了还是那样，后来给ddnspod.sh单个文件附加了执行权限，也还是没用，查看日志，输出结果如下：</p>
<p><img src="https://gitee.com/codechf/uPic-file/raw/master/uPic/2021/02/tkB77L-image-20210203200445201.png" alt="image-20210203200445201"></p>
<p>分析过后，发现sh脚本确实是执行了，只是脚本没有执行成功，脚本里面的语句系统不认识，就无法执行代码，就没有结果，最后上网搜索，才找到原因。</p>
<p>因为我的MacOS一直用的是zsh，早就不用bash了，所以脚本文件缺少环境的设置，在ddnspod.sh开头加上下面两行代码：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#00f">#!/bin/bash
</span><span style="color:#00f"></span>source /etc/profile
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>其他问题暂时没有遇到，有需要的话参考其他博客，问题挺全面的：<a href="https://blog.csdn.net/qq_34485626/article/details/111408192">MAC crontab定时任务不执行shell</a></p>
</li>
</ol>
<h1 id="成果">成果</h1>
<p>这么一番设置，在家就能畅快科学上网了，就算突然断电咋也不怕，不固定IP也不用担心，电脑会自动帮你把新的IP更新到域名中，手机就不用频繁的切换IP了。</p></article>
    </section>

    <footer class="ui attached segment dream-tags" data-html2canvas-ignore>
      
        
          <a class="ui label" href="/tags/%E6%8A%80%E6%9C%AF%E5%B8%96" title="技术帖">技术帖</a>
        
      
      <div
        class="ui label"
        style="float: right; cursor: pointer;"
        onclick="savePostAsImg()">
        <i class="save icon"></i>保存为图片
      </div>
    </footer>

    
      <footer class="ui attached segment" data-html2canvas-ignore>
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"></a>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
      </footer>
    

    
    
    

    
      <div class="ui segment">
        <div id="vcomments"></div>
      </div>
      <script>
        new Valine({
          el: '#vcomments',
          appId: "IxV03G57m5LqJ7yGI28hfg44-gzGzoHsz",
          appKey: "NL8D7xjtE7NRz1uGhbMw8TC9"
        })
      </script> 
    

  </div>
  <div class="sixteen wide mobile sixteen wide tablet four wide computer column">
    <article class="dream-header">
  <section class="ui top attached center aligned segment">
    <div class="ui small circular image">
      
        <img src="/me/me/1.jpg">
      
    </div>

    
    <div class="ui medium header">CHENG-HF 的博客<div class="sub header" style="margin-top: 0.5rem;">与其感慨路难行，不如马上出发。</div>
    </div>
    

    <div class="ui horizontal list">
      
      <a class="item" href="/posts">
        <i class="archive icon" title="归档"></i>
      </a>
      
      <a class="item" href="/tags">
        <i class="tags icon" title="所有标签"></i>
      </a>
      <a class="item" href="/categories">
        <i class="th list icon" title="所有分类"></i>
      </a>
    </div>
  </section>

  
  <section class="ui attached center aligned segment dream-tags">
    
      <a class="ui label" href="/tags/Mac" title="Mac">Mac</a>
    
      <a class="ui label" href="/tags/java" title="java">java</a>
    
      <a class="ui label" href="/tags/%E5%85%B6%E4%BB%96" title="其他">其他</a>
    
      <a class="ui label" href="/tags/%E6%8A%80%E6%9C%AF%E5%B8%96" title="技术帖">技术帖</a>
    
      <a class="ui label" href="/tags/%E6%96%87%E6%A1%A3" title="文档">文档</a>
    
      <a class="ui label" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80" title="编程语言">编程语言</a>
    
  </section>
  

  
  <section class="ui attached segment dream-categories">
    <div class="ui accordion">
      
      
      
      
      

      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/Linux%E5%AD%A6%E4%B9%A0" class="item">Linux学习</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/clash&#43;%E5%8A%A8%E6%80%81%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90&#43;crontab%E5%AE%9E%E7%8E%B0%E5%AE%8C%E7%BE%8E%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" class="item">clash&#43;动态域名解析&#43;crontab实现完美科学上网</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/%E5%AE%89%E5%8D%93%E5%AE%89%E8%A3%85Linux%E5%B9%B6%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="item">安卓安装Linux并搭建本地服务器</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/Mac%E6%93%8D%E4%BD%9C%E7%9B%B8%E5%85%B3" class="item">Mac操作相关</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/Mac-OS-%E7%BB%88%E7%AB%AF-iTerm2-%E5%B9%B6%E9%85%8D%E7%BD%AE-zsh/" class="item">Mac OS 终端 iTerm2 并配置 zsh</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/Mac%E4%BD%BF%E7%94%A8Tips%E6%B1%87%E6%80%BB/" class="item">Mac使用Tips汇总</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/Mac%E6%97%B6%E9%97%B4%E6%9C%BA%E5%99%A8%E8%A7%A3%E9%99%A4%E5%A4%87%E4%BB%BD/" class="item">Mac加速时间机器备份</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/Mac%E5%B8%B8%E7%94%A8%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4/" class="item">Mac常用终端命令</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/Python" class="item">Python</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/Python_1python%E5%AD%A6%E4%B9%A0_2%E7%94%A8python_docx%E7%BC%96%E5%86%9999%E4%B9%98%E6%B3%95%E8%A1%A8/" class="item">用python_docx编写99乘法表</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/Python_2%E7%88%AC%E8%99%AB_3Request%E6%A8%A1%E5%9D%97/" class="item">Python爬虫_3Request模块</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/Python_1python%E5%AD%A6%E4%B9%A0_1%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/" class="item">BeautifulSoup编码问题</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/bug%E5%A4%84%E7%90%86" class="item">bug处理</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/Tomecat%E5%90%AF%E5%8A%A8%E9%94%99%E8%AF%AF/" class="item">Tomcat启动错误</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/%E4%B8%8A%E8%AF%BE%E7%AC%94%E8%AE%B0JAVA%E5%AE%9E%E8%AE%AD" class="item">上课笔记JAVA实训</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BA/" class="item">类的解析：对象的动态创建</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/%E4%B8%8A%E8%AF%BE%E7%AC%94%E8%AE%B0Web%E4%B8%8ERESTful%E6%8A%80%E6%9C%AF" class="item">上课笔记Web与RESTful技术</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/5.RESTful_5.%E8%BF%87%E6%BB%A4%E5%99%A8/" class="item">RESTful:5.过滤器</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/4.RESTful_4.%E6%B6%88%E6%81%AF%E5%A4%84%E7%90%86/" class="item">RESTful:4.消息处理</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/3.RESTful_3.%E8%A1%A8%E5%8D%95%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92/" class="item">RESTful:3.表单参数传递</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/1.RESTful_%E6%B3%A8%E8%A7%A3/" class="item">RESTful:1.注解</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/2.RESTful_%E7%AE%80%E5%8D%95%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92/" class="item">RESTful:2.简单参数传递</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/%E5%85%B6%E4%BB%96" class="item">其他</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/111/" class="item">content/posts/111.md</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/%E7%A5%9E%E8%88%9FK670e-g6e3%E8%AF%A6%E7%BB%86%E6%8A%A5%E8%A1%A8/" class="item">神舟K670e G6e3详细报表</a>
                </div>
              </div>
            
              <div class="item">
                <div class="content">
                  <a href="/posts/%E9%9B%86%E5%AE%A2AP&#43;AC%E7%BB%84%E7%BD%91%E6%89%AB%E7%9B%B2%E8%B4%B4/" class="item">集客AP&#43;AC组网扫盲贴</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
          <div class="title">
            <i class="dropdown icon"></i>
            <a href="/categories/%E6%95%99%E7%A8%8B" class="item">教程</a>
          </div>
          <div class="content">
            <div class="ui list">
            
              <div class="item">
                <div class="content">
                  <a href="/posts/Hugo%E5%8D%9A%E5%AE%A2%E5%A4%9A%E5%B9%B3%E5%8F%B0%E9%83%A8%E7%BD%B2githubgitee%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="item">Hugo博客多平台部署（github、gitee、远程服务器）</a>
                </div>
              </div>
            
            </div>
          </div>
        
      
        

        
      

      
        <div class="title">
          <a class="item" href="/categories" style="padding-left: 0.5rem;">......</a>
        </div>
      
    </div>
  </section>
  

  <section class="ui attached segment header-socials">
    <nav class="ui secondary menu dream-menu dream-socials">
  
    <div class="item">
      <a href="/index.xml">
        <i class=" rss square icon" title="RSS"></i>
      </a>
    </div>
  
  
    <div class="item">
      <a href="mailto:chenghf122112@outlook.com">
        <i class=" mail icon" title="Email"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://twitter.com/@chenghfhf" target="_blank">
        <i class=" twitter icon" title="Twitter"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://facebook.com//hf.cheng.982" target="_blank">
        <i class=" facebook icon" title="Facebook"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://instagram.com/huafeicheng" target="_blank">
        <i class=" instagram icon" title="Instagram"></i>
      </a>
    </div>
  

  

  

  
    <div class="item">
      <a href="https://github.com/code-chf" target="_blank">
        <i class=" github icon" title="GitHub"></i>
      </a>
    </div>
  

  

  

  
  
    <div class="item">
      <a href="https://qm.qq.com/cgi-bin/qm/qr?k=ru1O1V8-jqlEWjRtqT4jiY0kClygKgxu&noverify=01968173984" target="_blank">
        <i class=" qq icon" title="qq"></i>
      </a>
    </div>
  

</nav>

  </section>

  <section class="ui bottom attached center aligned segment">
    
      <p>© 2019 - 2021 codechf的个人博客</p>
    

    

    
      <p>记录生活，记录美好~</p>
    
  </section>
</article>

    
  </div>

</div>


          </div>
        </section>
        <section class="back">
          <div class="dream-max-width">
            <div class="ui centered relaxed grid dream-grid dream-back">
  
  
  
    <section class="sixteen wide mobile eight wide tablet four wide computer column dream-column">
      <article>
        <div class="ui top attached segment">
          <h3 class="ui header">About Me</h3>
        </div>
        <div class="ui bottom attached segment markdown-body">
          <p>My Github Project.</p>
<ol>
<li>💕 景点客流量分析，项目地址：<a href="https://github.com/code-chf/Django_project/tree/master/DataAnalysisOnAttractionVisitorFlows">景点客流量分析</a> 💗</li>
</ol>
<ul>
<li><a href="https://www.python.org/">Python3</a>, <a href="https://python-docx.readthedocs.io/en/latest/">python-docx</a></li>
<li><a href="https://www.djangoproject.com/">Django</a></li>
<li><a href="https://getbootstrap.com/">Bootstrap4</a></li>
<li><a href="https://echarts.apache.org/zh/index.html">Echarts</a></li>
<li>HTML+CSS+JQUERY</li>
<li><a href="https://www.mysql.com">Mysql</a></li>
</ul>
<p>这篇博客用 <a href="https://gohugo.io/" target="_blank">Hugo</a> 创建，使用的主题是<a href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</p>

        </div>
      </article>
    </section>
  

  <section class="sixteen wide mobile eight wide tablet four wide computer column dream-column">
    <article>
      <div class="ui top attached segment">
        <h3 class="ui header">社交链接</h3>
      </div>
      <div class="ui bottom attached segment">
        <nav class="ui secondary menu dream-menu dream-socials">
  
    <div class="item">
      <a href="/index.xml">
        <i class="large rss square icon" title="RSS"></i>
      </a>
    </div>
  
  
    <div class="item">
      <a href="mailto:chenghf122112@outlook.com">
        <i class="large mail icon" title="Email"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://twitter.com/@chenghfhf" target="_blank">
        <i class="large twitter icon" title="Twitter"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://facebook.com//hf.cheng.982" target="_blank">
        <i class="large facebook icon" title="Facebook"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://instagram.com/huafeicheng" target="_blank">
        <i class="large instagram icon" title="Instagram"></i>
      </a>
    </div>
  

  

  

  
    <div class="item">
      <a href="https://github.com/code-chf" target="_blank">
        <i class="large github icon" title="GitHub"></i>
      </a>
    </div>
  

  

  

  
  
    <div class="item">
      <a href="https://qm.qq.com/cgi-bin/qm/qr?k=ru1O1V8-jqlEWjRtqT4jiY0kClygKgxu&noverify=01968173984" target="_blank">
        <i class="large qq icon" title="qq"></i>
      </a>
    </div>
  

</nav>

      </div>
    </article>
  </section>

  <section class="sixteen wide mobile eight wide tablet four wide computer column dream-column">
    
      <footer class="ui segment">
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"></a>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
      </footer>
    
  </section>

  
  
</div>

          </div>
        </section>
      </div>
    </div>

    <script>
  window.darkNav =  true 
  window.hasTwitterEmbed =  null 

  if (window.hasTwitterEmbed) {
    
    window.twttr = (function (d, s, id) {
      var js,
        fjs = d.getElementsByTagName(s)[0],
        t = window.twttr || {}
      if (d.getElementById(id)) return t
      js = d.createElement(s)
      js.id = id
      js.src = 'https://platform.twitter.com/widgets.js'
      fjs.parentNode.insertBefore(js, fjs)

      t._e = []
      t.ready = function (f) {
        t._e.push(f)
      }

      return t
    })(document, 'script', 'twitter-wjs')
  }
</script>
<script src="/js/jquery.min.js"></script>
<script src="/js/semantic.min.js"></script>
<script src="/js/jquery.overlayScrollbars.min.js"></script>
<script src="/js/header.js"></script>
<script src="/js/main.js"></script>
<script src="/js/theme.js"></script>

    
<script src="/js/html2canvas.min.js"></script>
<script src="/js/post.js"></script>


  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/highlight.min.js"></script>

  
    
      <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/languages/ocaml.min.js"></script>
     
  

  <script>
  hljs.initHighlightingOnLoad()
  setHighlightTheme()

  function setHighlightTheme() {
    var isDark = localStore.getItem('hugo-theme-dream-is-dark')
    var lightTheme = "idea"
    var darkTheme = "atelier-seaside-dark"
    var theme = isDark ? darkTheme : lightTheme

    $('link[data-highlight]').attr('href', 'https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/' + theme + '.min.css')
    $('pre').css('background', isDark ? '#333' : '')
  }
</script>





    
      <div class="ui inverted segment" id="dream-search">
  <div class="ui search">
    <div class="ui transparent input">
      <input class="prompt" type="text" placeholder="搜索" />
    </div>
    <div class="results"></div>
  </div>
</div>
<script>
  $(document).ready(function () {
    $.getJSON('https:\/\/codechf.cn/index.json', function (data) {
      $('.ui.search').search({
        source: data,
        searchFields: ['title'],
        showNoResults: true,
      })
    })
  })
</script>
<script src="/js/search.js"></script>

    

    
  </body>
</html>
